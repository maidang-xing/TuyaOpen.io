"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["8904"],{3201:function(e,n,i){i.r(n),i.d(n,{metadata:()=>r,default:()=>h,frontMatter:()=>d,contentTitle:()=>o,toc:()=>a,assets:()=>l});var r=JSON.parse('{"id":"applications/tuya.ai/demo-duo-eyes-mood","title":"Duo-Eyes Mood Robot","description":"duoeyemood is an intelligent chatbot based on Tuya AI\'s open-source large language model. It captures voice input by using a microphone, processes it with speech recognition, and enables conversational interaction, responsive replies, and humorous banter. The chat content is displayed in real-time on the screen.","source":"@site/docs/applications/tuya.ai/demo-duo-eyes-mood.md","sourceDirName":"applications/tuya.ai","slug":"/applications/tuya.ai/demo-duo-eyes-mood","permalink":"/docs/applications/tuya.ai/demo-duo-eyes-mood","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/applications/tuya.ai/demo-duo-eyes-mood.md","tags":[],"version":"current","frontMatter":{"title":"Duo-Eyes Mood Robot"},"sidebar":"docs","previous":{"title":"Chatbot","permalink":"/docs/applications/tuya.ai/demo-your-chat-bot"},"next":{"title":"AI Voice Interaction Implementation","permalink":"/docs/applications/tuya.ai/ai-components/ai-audio-asr-impl"}}'),t=i(4848),s=i(8453);let d={title:"Duo-Eyes Mood Robot"},o,l={},a=[{value:"Features",id:"features",level:2},{value:"Hardware support",id:"hardware-support",level:2},{value:"File structure",id:"file-structure",level:2},{value:"Root directory",id:"root-directory",level:3},{value:"Hardware configuration",id:"hardware-configuration",level:3},{value:"Header files",id:"header-files",level:3},{value:"Source file",id:"source-file",level:3},{value:"Display module",id:"display-module",level:4},{value:"Application configuration",id:"application-configuration",level:2},{value:"Process",id:"process",level:2},{value:"Build project",id:"build-project",level:2},{value:"Adapt to new development boards",id:"adapt-to-new-development-boards",level:2},{value:"Peripheral requirements",id:"peripheral-requirements",level:3},{value:"Adapt to development boards",id:"adapt-to-development-boards",level:3}];function c(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/tuya/TuyaOpen/tree/master/apps/tuya.ai/duo_eye_mood",children:"duo_eye_mood"})," is an intelligent chatbot based on Tuya AI's open-source large language model. It captures voice input by using a microphone, processes it with speech recognition, and enables conversational interaction, responsive replies, and humorous banter. The chat content is displayed in real-time on the screen."]}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Supports Tuya voice agent with four modes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Hold-to-talk mode"}),": Users press and hold a button to start voice input, and release to end."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Press-to-talk mode"}),": The device enters standby mode upon power-on. A short button press switches it to the listening state for voice input and interaction with the agent."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wake word mode"}),": Users wake the device with a wake word for a single interaction, similar to talking to a smart speaker."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Free talk mode"}),": After waking the device with a wake word, users can engage in continuous conversation. If no speech is detected within 30 seconds, the device returns to standby and requires rewaking for the next interaction."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Supports local interruption of ongoing chats via button operation."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Provides various status prompt tones, such as pairing, going offline, and wake-up."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Shows various eye GIFs to reflect the current emotion of the chatbot, such as angry, surprised, scared, confused, and other expressive eye animations, enhancing interactivity and fun."}),"\n",(0,t.jsxs)(n.p,{children:["Supported emotions: ",(0,t.jsx)(n.strong,{children:"Neutral"}),", ",(0,t.jsx)(n.strong,{children:"surprised"}),", ",(0,t.jsx)(n.strong,{children:"angry"}),", ",(0,t.jsx)(n.strong,{children:"crying"}),", ",(0,t.jsx)(n.strong,{children:"touched"}),", ",(0,t.jsx)(n.strong,{children:"sad"}),", ",(0,t.jsx)(n.strong,{children:"thinking"}),", ",(0,t.jsx)(n.strong,{children:"happy"}),", ",(0,t.jsx)(n.strong,{children:"rejecting"}),", and ",(0,t.jsx)(n.strong,{children:"disappointed"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Allows device volume adjustment on the app."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Enter pairing mode by power cycling the device three times consecutively."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Supports real-time switching of AI agent roles on the app."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"hardware-support",children:"Hardware support"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Board"}),(0,t.jsx)(n.th,{children:"Configuration file"}),(0,t.jsx)(n.th,{children:"PID"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["T5AI_BOARD development board + dual-screen accessory ",(0,t.jsx)("br",{}),"(two 1.28-inch SPI565 ST7735S round displays)"]}),(0,t.jsx)(n.td,{children:"TUYA_T5AI_BOARD_EYES.config"}),(0,t.jsx)(n.td,{children:"8ixyalzpn0jrun9y"})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"file-structure",children:"File structure"}),"\n",(0,t.jsx)(n.h3,{id:"root-directory",children:"Root directory"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:".\n\u251C\u2500\u2500 app_default.config    # Default application configuration file\n\u251C\u2500\u2500 CMakeLists.txt        # CMake build script\n\u251C\u2500\u2500 config                # Hardware configuration\n\u251C\u2500\u2500 include               # Header files\n\u251C\u2500\u2500 Kconfig               # Project configuration file\n\u251C\u2500\u2500 README.md             # Documentation in English\n\u251C\u2500\u2500 README_zh.md          # Documentation in Chinese\n\u2514\u2500\u2500 src                   # Source code\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hardware-configuration",children:"Hardware configuration"}),"\n",(0,t.jsxs)(n.p,{children:["The files in the ",(0,t.jsx)(n.code,{children:"config"})," directory are configuration files adapted for various development boards. If you have completed adaptation for a new board based on this project, you can add the corresponding configuration file in this directory."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\u251C\u2500\u2500 config       \n\u2502\xa0\xa0 \u2514\u2500\u2500 TUYA_T5AI_BOARD_EYES.config    # T5AI_BOARD development board + dual-screen accessory\n"})}),"\n",(0,t.jsx)(n.h3,{id:"header-files",children:"Header files"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\u251C\u2500\u2500 include\n\u2502\xa0\xa0 \u251C\u2500\u2500 app_chat_bot.h       # Chatbot functionality\n\u2502\xa0\xa0 \u251C\u2500\u2500 app_display.h        # Display module\n\u2502\xa0\xa0 \u251C\u2500\u2500 reset_netcfg.h       # Power cycle reset functionality\n\u2502\xa0\xa0 \u2514\u2500\u2500 tuya_config.h        # Device license configuration and related information\n"})}),"\n",(0,t.jsx)(n.h3,{id:"source-file",children:"Source file"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\u2514\u2500\u2500 src\n    \u251C\u2500\u2500 app_chat_bot.c      # Chatbot functionality implementation\n    \u251C\u2500\u2500 display             # Display module\n    \u251C\u2500\u2500 reset_netcfg.c      # Power cycle reset functionality\n    \u2514\u2500\u2500 tuya_main.c         # Application entry\n"})}),"\n",(0,t.jsx)(n.h4,{id:"display-module",children:"Display module"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"\u251C\u2500\u2500 display                 # Display module\n\u2502\xa0\xa0 \u251C\u2500\u2500 app_display.c       # Main control file of the display module\n\u2502\xa0\xa0 \u251C\u2500\u2500 CMakeLists.txt      # CMake configuration of the display module\n\u2502\xa0\xa0 \u251C\u2500\u2500 image               # Image resources\n\u2502\xa0\xa0 \u251C\u2500\u2500 tuya_lvgl.c         # LVGL adaptation file for the application\n\u2502\xa0\xa0 \u251C\u2500\u2500 tuya_lvgl.h         # LVGL adaptation header file\n\u2502\xa0\xa0 \u2514\u2500\u2500 ui                  # UI implementation\n\u2502\xa0\xa0     \u251C\u2500\u2500 ui_display.h    # Common header file of the UI module\n\u2502\xa0\xa0 \u2514\u2500\u2500 ui_eyes.c           # Dual-screen emotion display interface\n"})}),"\n",(0,t.jsx)(n.h2,{id:"application-configuration",children:"Application configuration"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Product ID (PID)"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Macro"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TUYA_PRODUCT_KEY"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:"The product ID, which is bound to the Tuya AI agent."})]})})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Select chat mode"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Macro"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_CHAT_MODE_KEY_PRESS_HOLD_SINGEL"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"Hold-to-talk mode"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_CHAT_MODE_KEY_TRIG_VAD_FREE"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"Press-to-talk mode"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_CHAT_MODE_ASR_WAKEUP_SINGEL"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"Wake word mode"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_CHAT_MODE_ASR_WAKEUP_FREE"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"Free talk mode"})]})]})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Select wake word"})}),"\n",(0,t.jsxs)(n.p,{children:["This configuration is only available when the chat mode is set to ",(0,t.jsx)(n.strong,{children:"wake word mode"})," and ",(0,t.jsx)(n.strong,{children:"free talk mode"}),"."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Macro"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_NIHAO_TUYA"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:'The wake word is "Hey Tuya".'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_NIHAO_XIAOZHI"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:'The wake word is "Hey Xiaozhi".'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_XIAOZHI_TONGXUE"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:'The wake word is "Xiaozhi Tongxue".'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ENABLE_WAKEUP_KEYWORD_XIAOZHI_GUANJIA"}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:'The wake word is "Xiaozhi Guanjia".'})]})]})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"process",children:"Process"}),"\n",(0,t.jsxs)(n.p,{children:["This project depends on the application component ",(0,t.jsx)(n.a,{href:"/docs/applications/tuya.ai/ai-components/ai-audio-asr-impl",children:"ai_audio"}),". This component implements various features, including audio capture, audio playback, and creating cloud-based AI sessions."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Hold-to-talk mode"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(1470).A+"",width:"1169",height:"718"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Press-to-talk mode"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(4068).A+"",width:"1188",height:"689"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Wake word mode"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(2221).A+"",width:"1043",height:"673"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Free talk mode"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:i(1238).A+"",width:"1043",height:"754"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"build-project",children:"Build project"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Install and configure the prerequisite environment. For more information, see ",(0,t.jsx)(n.a,{href:"/docs/quick-start/enviroment-setup",children:"Set up Environment"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Change from the TuyaOpen root directory to the application directory."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd apps/tuya.ai/duo_eye_mood\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Select the specified development board configuration."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"tos.py config choice\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Build the project."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"tos.py build\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"adapt-to-new-development-boards",children:"Adapt to new development boards"}),"\n",(0,t.jsx)(n.h3,{id:"peripheral-requirements",children:"Peripheral requirements"}),"\n",(0,t.jsxs)(n.p,{children:["For a list of peripherals supported by TuyaOpen, refer to the ",(0,t.jsx)(n.a,{href:"/docs/peripheral/support_peripheral_list",children:"Peripheral driver list"}),". New development boards must include all ",(0,t.jsx)(n.strong,{children:"required"})," peripheral drivers listed."]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Peripheral"}),(0,t.jsx)(n.th,{children:"Peripheral component"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Required or not"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Audio driver"}),(0,t.jsx)(n.td,{children:"audio_codecs"}),(0,t.jsx)(n.td,{children:"Capture PCM audio data and play MP3 audio (parameters: 16-bit depth, 16 KHz sample rate, mono)."}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Display driver"}),(0,t.jsx)(n.td,{children:"Display"}),(0,t.jsx)(n.td,{children:"Features two 1.28-inch round screens, representing a pair of eyes. Both round screens are controlled by the same driver interface, meaning they display identical animations."}),(0,t.jsx)(n.td,{children:"Yes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Indicator driver"}),(0,t.jsx)(n.td,{children:"LED"}),(0,t.jsx)(n.td,{children:"Indicates whether the device is currently in the listening state."}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Button driver"}),(0,t.jsx)(n.td,{children:"Button"}),(0,t.jsx)(n.td,{children:"Interrupts the chat and starts a chat in press-to-talk mode."}),(0,t.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"adapt-to-development-boards",children:"Adapt to development boards"}),"\n",(0,t.jsxs)(n.p,{children:["For more information on how to add and adapt to a new development board, refer to ",(0,t.jsx)(n.a,{href:"/docs/new-hardware/new-board",children:"Adapt to new board-level drivers (board)"}),"."]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["You can register the peripheral driver hardware on the development board through ",(0,t.jsx)(n.code,{children:"board_register_hardware"}),". The implementation of this interface is placed in the board-level folder."]}),(0,t.jsxs)(n.p,{children:["In the target development board's folder (",(0,t.jsx)(n.code,{children:"boards/target development environment/target development board"}),", for example, ",(0,t.jsx)(n.code,{children:"boards/T5AI/TUYA_T5AI_BOARD"}),"), you can modify the driver's hardware configuration (such as changing the pins or chip type)."]})]})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},4068:function(e,n,i){i.d(n,{A:()=>r});let r=i.p+"assets/images/button_talk-6a8ed431b8a5f61cb671639c8bb7b291.svg"},1238:function(e,n,i){i.d(n,{A:()=>r});let r=i.p+"assets/images/free_talk-9a3d7562818881855498024e8aed08bb.svg"},1470:function(e,n,i){i.d(n,{A:()=>r});let r=i.p+"assets/images/long_talk-259dd9745ec39a33840c12ac094f5b5e.svg"},2221:function(e,n,i){i.d(n,{A:()=>r});let r=i.p+"assets/images/wakeup_talk-24555517ab9afac6295e8e6d66ba7c8e.svg"},8453:function(e,n,i){i.d(n,{R:()=>d,x:()=>o});var r=i(6540);let t={},s=r.createContext(t);function d(e){let n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);