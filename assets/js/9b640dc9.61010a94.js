"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["1213"],{6143:function(e,t,n){n.r(t),n.d(t,{metadata:()=>o,default:()=>p,frontMatter:()=>r,contentTitle:()=>a,toc:()=>c,assets:()=>s});var o=JSON.parse('{"id":"cloud/tuya-cloud/creating-new-product","title":"Creating New Product","description":"Environment Setup and SDK Download","source":"@site/docs/cloud/tuya-cloud/creating-new-product.md","sourceDirName":"cloud/tuya-cloud","slug":"/cloud/tuya-cloud/creating-new-product","permalink":"/docs/cloud/tuya-cloud/creating-new-product","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/cloud/tuya-cloud/creating-new-product.md","tags":[],"version":"current","frontMatter":{"title":"Creating New Product"},"sidebar":"docs","previous":{"title":"Create project","permalink":"/docs/new-hardware/new-project"},"next":{"title":"tkl_mutex | Mutex Lock","permalink":"/docs/tkl-api/tkl_mutex"}}'),d=n(4848),i=n(8453);let r={title:"Creating New Product"},a="TuyaOpen SDK Quick Start",s={},c=[{value:"Environment Setup and SDK Download",id:"environment-setup-and-sdk-download",level:2},{value:"Create Product",id:"create-product",level:2},{value:"Add Product Functions",id:"add-product-functions",level:3},{value:"Add AI Capabilities",id:"add-ai-capabilities",level:3},{value:"Add Tool Set:",id:"add-tool-set",level:4},{value:"Develop Prompts",id:"develop-prompts",level:4},{value:"Add Custom Firmware",id:"add-custom-firmware",level:3},{value:"AI Control Command Configuration",id:"ai-control-command-configuration",level:2},{value:"Implement Product Functions",id:"implement-product-functions",level:2},{value:"Authorize Development Board",id:"authorize-development-board",level:2},{value:"Method 1: Code Authorization",id:"method-1-code-authorization",level:3},{value:"Method 2: Tool Authorization",id:"method-2-tool-authorization",level:3},{value:"Compile and Flash",id:"compile-and-flash",level:2},{value:"Common Issues",id:"common-issues",level:2},{value:"Flashing always fails at Write, how to solve?",id:"flashing-always-fails-at-write-how-to-solve",level:3}];function l(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.header,{children:(0,d.jsx)(t.h1,{id:"tuyaopen-sdk-quick-start",children:"TuyaOpen SDK Quick Start"})}),"\n",(0,d.jsx)(t.h2,{id:"environment-setup-and-sdk-download",children:"Environment Setup and SDK Download"}),"\n",(0,d.jsxs)(t.p,{children:["First, you need to set up the development environment and download the TuyaOpen SDK. For detailed tutorials, please visit the ",(0,d.jsx)(t.a,{href:"https://tuyaopen.ai/zh/docs/about-tuyaopen",children:"TuyaOpen Documentation Center"}),"."]}),"\n",(0,d.jsx)(t.h2,{id:"create-product",children:"Create Product"}),"\n",(0,d.jsxs)(t.p,{children:["Go to the ",(0,d.jsxs)(t.a,{href:"https://platform.tuya.com/pmg/list",children:["Tuya Developer Platform > ",(0,d.jsx)(t.strong,{children:"Product Development"})]})," page, click ",(0,d.jsx)(t.strong,{children:"Create Product"}),", select the category based on your product form, and refer to ",(0,d.jsx)(t.a,{href:"https://developer.tuya.com/cn/docs/iot/create-product?id=K914jp1ijtsfe",children:"Create Product"})," to complete product creation."]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/175577153664954543874.png",alt:"Create Product.png"})}),"\n",(0,d.jsx)(t.p,{children:"After entering the product development process, please focus on the following configurations: adding product functions, AI capabilities, and new firmware."}),"\n",(0,d.jsx)(t.h3,{id:"add-product-functions",children:"Add Product Functions"}),"\n",(0,d.jsxs)(t.p,{children:["Under ",(0,d.jsx)(t.strong,{children:"01 Function Definition"})," > ",(0,d.jsx)(t.strong,{children:"Product Functions"}),", click ",(0,d.jsx)(t.strong,{children:"Add Function"})," to add standard/custom functions to the product, or enable advanced functions."]}),"\n",(0,d.jsxs)(t.p,{children:["To learn about product functions, please refer to ",(0,d.jsx)(t.a,{href:"https://developer.tuya.com/cn/docs/iot/define-product-features?id=K97vug7wgxpoq",children:"Product Functions"}),"."]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/17557717576bbf113ed8f.png",alt:"Add Product Functions.png"})}),"\n",(0,d.jsx)(t.h3,{id:"add-ai-capabilities",children:"Add AI Capabilities"}),"\n",(0,d.jsxs)(t.p,{children:["Under ",(0,d.jsx)(t.strong,{children:"01 Function Definition"})," > ",(0,d.jsx)(t.strong,{children:"Product AI Functions"}),", click ",(0,d.jsx)(t.strong,{children:"Add Intelligent Agent"})," to add AI capabilities to the product."]}),"\n",(0,d.jsxs)(t.p,{children:["After entering the intelligent agent development process, refer to ",(0,d.jsx)(t.a,{href:"https://developer.tuya.com/cn/docs/iot/AI-feature?id=Keapy1et1fc63",children:"Product AI Function Development"})," to complete intelligent agent development. Focus on the following configurations:"]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/1757318291e68cc87672c.png",alt:"Add Intelligent Agent.png"})}),"\n",(0,d.jsx)(t.h4,{id:"add-tool-set",children:"Add Tool Set:"}),"\n",(0,d.jsxs)(t.ol,{children:["\n",(0,d.jsxs)(t.li,{children:["Under ",(0,d.jsx)(t.strong,{children:"01 Model Capability Configuration"})," > ",(0,d.jsx)(t.strong,{children:"Skill Configuration"}),", select ",(0,d.jsx)(t.strong,{children:"Tool Set"}),", click the add (",(0,d.jsx)(t.strong,{children:"+"}),") button on the right to enter the ",(0,d.jsx)(t.strong,{children:"Add Tool"})," page."]}),"\n",(0,d.jsxs)(t.li,{children:["Under ",(0,d.jsx)(t.strong,{children:"Device Control"})," > ",(0,d.jsx)(t.strong,{children:"Device Self-Control - Only control devices associated with Agent"}),", select to add ",(0,d.jsx)(t.strong,{children:"Control devices bound to intelligent agent"}),"."]}),"\n"]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/1755773751f7b81957a77.png",alt:"Add Tool.png"})}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/17557738127051a6780ef.png",alt:"Add Tool.png"})}),"\n",(0,d.jsx)(t.h4,{id:"develop-prompts",children:"Develop Prompts"}),"\n",(0,d.jsxs)(t.p,{children:["Under ",(0,d.jsx)(t.strong,{children:"02 Prompt Development"}),", refer to ",(0,d.jsx)(t.a,{href:"https://www.tuyaos.com/viewtopic.php?t=3724",children:"Prompt Tutorial"})," to complete prompt development."]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/175577395562cc51ae786.png",alt:"Develop Prompts.png"})}),"\n",(0,d.jsx)(t.h3,{id:"add-custom-firmware",children:"Add Custom Firmware"}),"\n",(0,d.jsx)(t.p,{children:"To enable subsequent OTA upgrades and batch module ordering, custom firmware needs to be added."}),"\n",(0,d.jsxs)(t.p,{children:["After entering the product development process, under ",(0,d.jsx)(t.strong,{children:"03 Hardware Development"}),", select ",(0,d.jsx)(t.strong,{children:"Cloud Access Development Method"})," as ",(0,d.jsx)(t.strong,{children:"TuyaOS AI"}),", select ",(0,d.jsx)(t.strong,{children:"Cloud Access Hardware"})," as T5 module, then click ",(0,d.jsx)(t.strong,{children:"Create Custom Firmware"})," and complete related configurations."]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/1757318532460587f4648.png",alt:"Add Firmware.png"})}),"\n",(0,d.jsx)(t.h2,{id:"ai-control-command-configuration",children:"AI Control Command Configuration"}),"\n",(0,d.jsx)(t.admonition,{type:"info",children:(0,d.jsx)(t.p,{children:"If all product functions added during product development are standard functions (Data Point, DP; standard functions are function points with DP ID less than 100), self-control commands are configured by default and this step can be skipped; if you have added custom function points, you need to complete this step to modify the command scheme."})}),"\n",(0,d.jsxs)(t.p,{children:["Go to the ",(0,d.jsx)(t.a,{href:"https://platform.tuya.com/exp/voice/ai",children:(0,d.jsx)(t.strong,{children:"AI Product Command Configuration"})})," page, under ",(0,d.jsx)(t.strong,{children:"Self-Control Commands"}),", click ",(0,d.jsx)(t.strong,{children:"Modify Command Scheme"}),", and refer to ",(0,d.jsx)(t.a,{href:"https://developer.tuya.com/cn/docs/iot/Self-control?id=Kep3yhifdrvah",children:"Device Self-Control Commands"})," to complete related configurations."]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/1757320122af584c90f10.png",alt:"AI Product Command Configuration.png"})}),"\n",(0,d.jsx)(t.h2,{id:"implement-product-functions",children:"Implement Product Functions"}),"\n",(0,d.jsxs)(t.p,{children:["DP (Data Point) is Tuya's data model for defining product functions, used to describe product functionality. To achieve large-scale and digital management of massive and diverse devices, an abstract language is needed to describe devices. For detailed description of the DP model, please refer to ",(0,d.jsx)(t.a,{href:"https://developer.tuya.com/cn/docs/iot-device-dev/TuyaOS-iot_abi_dp_ctrl?id=Kcoglhn5r7ajr",children:"DP Model and Control Protocol"}),"."]}),"\n",(0,d.jsxs)(t.p,{children:["Taking the ",(0,d.jsx)(t.code,{children:"your_chat_bot"})," Demo in TuyaOpen as an example, when the App or AI sends control commands, it will enter the ",(0,d.jsx)(t.code,{children:"user_event_handler_on"})," interface. Among them, Object types (Boolean, Value, Enum, Bitmap, String) enter the ",(0,d.jsx)(t.code,{children:"TUYA_EVENT_DP_RECEIVE_OBJ"})," branch, and Raw types enter the ",(0,d.jsx)(t.code,{children:"TUYA_EVENT_DP_RECEIVE_RAW"})," branch."]}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{className:"language-c",children:'void user_event_handler_on(tuya_iot_client_t *client, tuya_event_msg_t *event)\n{\n    PR_DEBUG("Tuya Event ID:%d(%s)", event->id, EVENT_ID2STR(event->id));\n    PR_INFO("Device Free heap %d", tal_system_get_free_heap_size());\n\n    switch (event->id) {\n    /*\n    ******Omit the intermediate process here******\n    */\n        /* RECV OBJ DP */\n    case TUYA_EVENT_DP_RECEIVE_OBJ: {\n        dp_obj_recv_t *dpobj = event->value.dpobj;\n        PR_DEBUG("SOC Rev DP Cmd t1:%d t2:%d CNT:%u", dpobj->cmd_tp, dpobj->dtt_tp, dpobj->dpscnt);\n        if (dpobj->devid != NULL) {\n            PR_DEBUG("devid.%s", dpobj->devid);\n        }\n\n        audio_dp_obj_proc(dpobj);\n\n        tuya_iot_dp_obj_report(client, dpobj->devid, dpobj->dps, dpobj->dpscnt, 0);\n\n    } break;\n\n    /* RECV RAW DP */\n    case TUYA_EVENT_DP_RECEIVE_RAW: {\n        dp_raw_recv_t *dpraw = event->value.dpraw;\n        PR_DEBUG("SOC Rev DP Cmd t1:%d t2:%d", dpraw->cmd_tp, dpraw->dtt_tp);\n        if (dpraw->devid != NULL) {\n            PR_DEBUG("devid.%s", dpraw->devid);\n        }\n\n        uint32_t index = 0;\n        dp_raw_t *dp = &dpraw->dp;\n        PR_DEBUG("dpid:%d type:RAW len:%d data:", dp->id, dp->len);\n        for (index = 0; index < dp->len; index++) {\n            PR_DEBUG_RAW("%02x", dp->data[index]);\n        }\n\n        tuya_iot_dp_raw_report(client, dpraw->devid, &dpraw->dp, 3);\n\n    } break;\n\n    default:\n        break;\n    }\n}\n\n'})}),"\n",(0,d.jsx)(t.h2,{id:"authorize-development-board",children:"Authorize Development Board"}),"\n",(0,d.jsx)(t.h3,{id:"method-1-code-authorization",children:"Method 1: Code Authorization"}),"\n",(0,d.jsxs)(t.p,{children:["Modify header files. For detailed process, please refer to ",(0,d.jsx)(t.a,{href:"https://tuyaopen.ai/zh/docs/quick-start/equipment-authorization",children:"Device Authorization"}),"."]}),"\n",(0,d.jsxs)(t.p,{children:["For example, open the ",(0,d.jsx)(t.code,{children:"your_chat_bot"})," project, find the ",(0,d.jsx)(t.code,{children:"tuya_config.h"})," file at path: ",(0,d.jsx)(t.code,{children:"apps/tuya.ai/your_chat_bot/include/tuya_config.h"}),", and modify the following three parameters:"]}),"\n",(0,d.jsxs)(t.ul,{children:["\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.code,{children:"TUYA_PRODUCT_ID"}),": Product ID (PID) generated when creating the product."]}),"\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.code,{children:"TUYA_OPENSDK_UUID"}),": UUID can be obtained for free, please contact Tuya staff to get it."]}),"\n",(0,d.jsxs)(t.li,{children:[(0,d.jsx)(t.code,{children:"TUYA_OPENSDK_AUTHKEY"}),": Authkey can be obtained for free, please contact Tuya staff to get it."]}),"\n"]}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/175577227898c13ebfae5.png",alt:"Get PID.png"})}),"\n",(0,d.jsx)(t.p,{children:"Example as follows:"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{children:'#ifndef TUYA_PRODUCT_ID\n#define TUYA_PRODUCT_ID "p320pepzvmm1ghse"//PID\n#endif\n\n#define TUYA_OPENSDK_UUID    "uuidxxxxxxxxxxxxxxxx"             // Please change to the correct UUID.\n#define TUYA_OPENSDK_AUTHKEY "keyxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" // Please change to the correct authkey.\n\n'})}),"\n",(0,d.jsx)(t.h3,{id:"method-2-tool-authorization",children:"Method 2: Tool Authorization"}),"\n",(0,d.jsxs)(t.p,{children:["In ",(0,d.jsx)(t.strong,{children:"Tuya Uart Tool"}),", select the flashing serial port and ",(0,d.jsx)(t.strong,{children:"BaudRate"}),", click ",(0,d.jsx)(t.strong,{children:"Start"})," to open the serial port, then click ",(0,d.jsx)(t.strong,{children:"Authorize"})," to authorize."]}),"\n",(0,d.jsx)("img",{alt:"Tool Authorization",src:"https://images.tuyacn.com/content-platform/hestia/1757310278591d8030b54.png",width:"600"}),"\n",(0,d.jsx)(t.h2,{id:"compile-and-flash",children:"Compile and Flash"}),"\n",(0,d.jsx)(t.p,{children:"Enter the following in the terminal:"}),"\n",(0,d.jsx)(t.pre,{children:(0,d.jsx)(t.code,{children:"tos.py build && tos.py flash \n"})}),"\n",(0,d.jsx)(t.p,{children:(0,d.jsx)(t.img,{src:"https://images.tuyacn.com/content-platform/hestia/17557741754d231019d50.png",alt:"Example.png"})}),"\n",(0,d.jsx)(t.p,{children:"If using the T5AI-Board development board, the board itself is configured with two serial ports, one for flashing and one for log output. If flashing fails, you can switch port numbers and retry."}),"\n",(0,d.jsx)(t.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,d.jsx)(t.h3,{id:"flashing-always-fails-at-write-how-to-solve",children:"Flashing always fails at Write, how to solve?"}),"\n",(0,d.jsxs)(t.p,{children:["Please refer to ",(0,d.jsx)(t.a,{href:"https://tuyaopen.ai/zh/docs/tos-tools/tools-tyutool#%E7%83%A7%E5%BD%95%E8%BF%87%E7%A8%8B%E4%B8%AD%E6%80%BB%E6%98%AF%E5%9C%A8write%E6%97%B6%E5%A4%B1%E8%B4%A5",children:"Install Corresponding Driver"})," to try to solve it."]})]})}function p(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,d.jsx)(t,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}},8453:function(e,t,n){n.d(t,{R:()=>r,x:()=>a});var o=n(6540);let d={},i=o.createContext(d);function r(e){let t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);