<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-peripheral/audio" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Audio Driver | TuyaOpen</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true name=twitter:image content=https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true property=og:url content=https://tuyaopen.io/docs/peripheral/audio /><meta data-rh=true property=og:locale content=en /><meta data-rh=true property=og:locale:alternate content=zh /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="Audio Driver | TuyaOpen"/><meta data-rh=true name=description content=Overview /><meta data-rh=true property=og:description content=Overview /><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://tuyaopen.io/docs/peripheral/audio /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/peripheral/audio hreflang=en /><link data-rh=true rel=alternate href=https://tuyaopen.io/zh/docs/peripheral/audio hreflang=zh /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/peripheral/audio hreflang=x-default /><link data-rh=true rel=preconnect href=https://NT1L7IWROF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://tuyaopen.io/docs/peripheral/audio","name":"Audio Driver","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="TuyaOpen RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="TuyaOpen Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-3M0J54E8XF"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3M0J54E8XF",{})</script><link rel=search type=application/opensearchdescription+xml title=TuyaOpen href=/opensearch.xml><link rel=preconnect href=https://www.clarity.ms><script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/"+r,(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script","lggqck9srz")</script><meta name=algolia-site-verification content=6232065417750C16><link rel=stylesheet href=/assets/css/styles.ee9e0cf5.css /><script src=/assets/js/runtime~main.62c5001a.js defer></script><script src=/assets/js/main.c3d91c71.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">TuyaOpen</b></a><a class="navbar__item navbar__link" href=/docs/about-tuyaopen>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Get Yours</a><ul class=dropdown__menu><li><a class=dropdown__link href=/pricing>Get License Key</a><li><a class=dropdown__link href=/get-hardware>Get Hardware</a><li><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=dropdown__link>Get Code<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/projects>Projects</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Tools</a><ul class=dropdown__menu><li><a class=dropdown__link href=/tools/tyutool>Universal Serial Port Tools</a><li><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=dropdown__link>Web Serial/Flashing Tools<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/peripheral/audio target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a><li><a href=/zh/docs/peripheral/audio target=_self rel="noopener noreferrer" class=dropdown__link lang=zh>简体中文</a></ul></div><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label=GitHub></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/><img src=/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/><b>TuyaOpen</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/about-tuyaopen><span title="About TuyaOpen" class=linkLabel_WmDU>About TuyaOpen</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/maintenance-and-releases><span title="Technical Roadmap & Releases" class=linkLabel_WmDU>Technical Roadmap & Releases</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/project-walkthrough><span title="Directory Structure" class=linkLabel_WmDU>Directory Structure</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/quick-start><span title="Getting Started" class=categoryLinkLabel_W154>Getting Started</span></a><button aria-label="Collapse sidebar category 'Getting Started'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/unboxing><span title="Unboxing Use" class=linkLabel_WmDU>Unboxing Use</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/enviroment-setup><span title="Set up Environment" class=linkLabel_WmDU>Set up Environment</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/project-compilation><span title="Build Project" class=linkLabel_WmDU>Build Project</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/firmware-burning><span title="Flashing and Logging" class=linkLabel_WmDU>Flashing and Logging</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/equipment-authorization><span title="Authorize Devices" class=linkLabel_WmDU>Authorize Devices</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/device-network-configuration><span title="Device Pairing" class=linkLabel_WmDU>Device Pairing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/device-debug><span title="Device Debugging" class=linkLabel_WmDU>Device Debugging</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/hardware-specific><span title="Hardware Guides" class=categoryLinkLabel_W154>Hardware Guides</span></a><button aria-label="Collapse sidebar category 'Hardware Guides'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5-AI Board DevKit" class=categoryLinkLabel_W154>T5-AI Board DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5AI-Board Overview" class=linkLabel_WmDU>T5AI-Board Overview</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5-AI Core DevKit" class=categoryLinkLabel_W154>T5-AI Core DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5AI-Core Overview" class=linkLabel_WmDU>T5AI-Core Overview</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/applications><span title=Applications class=categoryLinkLabel_W154>Applications</span></a><button aria-label="Expand sidebar category 'Applications'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/examples/demo-generic-examples><span title=Examples class=categoryLinkLabel_W154>Examples</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/peripheral/support_peripheral_list><span title=Peripherals class=categoryLinkLabel_W154>Peripherals</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/peripheral/support_peripheral_list><span title="Peripheral Driver List" class=linkLabel_WmDU>Peripheral Driver List</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/peripheral/display><span title="Display Driver" class=linkLabel_WmDU>Display Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/peripheral/audio><span title="Audio Driver" class=linkLabel_WmDU>Audio Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/peripheral/button><span title="Button Driver" class=linkLabel_WmDU>Button Driver</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/new-hardware/porting-platform><span title="New Project" class=categoryLinkLabel_W154>New Project</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/docs/cloud/tuya-cloud/creating-new-product><span title="Cloud Services" class=categoryLinkLabel_W154>Cloud Services</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/cloud/tuya-cloud/creating-new-product><span title="Tuya Cloud Platform" class=categoryLinkLabel_W154>Tuya Cloud Platform</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/cloud/tuya-cloud/creating-new-product><span title="Creating New Product" class=linkLabel_WmDU>Creating New Product</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/tkl-api/tkl_mutex><span title="TKL APIs" class=categoryLinkLabel_W154>TKL APIs</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/tos-tools/tos-guide><span title="Tos Tools" class=categoryLinkLabel_W154>Tos Tools</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/build-system/compilation-guide><span title="Build System" class=categoryLinkLabel_W154>Build System</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/faqs><span title=FAQs class=linkLabel_WmDU>FAQs</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/contribute/contribute-guide><span title=Contribute class=categoryLinkLabel_W154>Contribute</span></a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Peripherals</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Audio Driver</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1 id=audio-driver>Audio Driver</h1></header>
<h2 id=overview>Overview</h2>
<p>The <a href=https://github.com/tuya/TuyaOpen/tree/master/src/peripherals/audio_codecs>audio driver</a> is a core component within TuyaOpen responsible for handling audio input and output. It provides a unified interface to manage different types of audio devices, such as microphones and speakers. Through this driver, applications can easily perform audio capture, playback, and configuration without needing to manage the specific implementation details of the underlying hardware.</p>
<h2 id=fundamental-concepts>Fundamental concepts</h2>
<table><thead><tr><th style=text-align:left>Term<th style=text-align:left>Definition<tbody><tr><td style=text-align:left>Microphone (MIC)<td style=text-align:left>A microphone is a transducer that converts sound signals into electrical signals.<tr><td style=text-align:left>Speaker (SPK)<td style=text-align:left>A speaker is a device that converts electrical signals into sound signals.<tr><td style=text-align:left>Codec<td style=text-align:left>A codec typically consists of two main parts:<ul><li><strong>Encoder</strong>: Converts raw data (like uncompressed audio or video) into another format for easier storage or transmission.<li><strong>Decoder</strong>: Restores encoded data to its original format for playback or viewing.</ul><tr><td style=text-align:left>Power amplifier (PA)<td style=text-align:left>An electronic component that amplifies a weak input signal to drive higher-power loads, such as speakers or antennas.<tr><td style=text-align:left>Pulse code modulation (PCM)<td style=text-align:left>An encoding method that converts analog audio signals into digital signals. Raw PCM data (often called PCM raw stream or raw data) is uncompressed and requires decoding for playback.<tr><td style=text-align:left>Pulse density modulation (PDM)<td style=text-align:left>A digital audio encoding method characterized by having only one bit of data, using the density of pulses to represent the intensity of the analog signal.<tr><td style=text-align:left>Inter-integrated circuit (I2C)<td style=text-align:left>Primarily used for transmitting control signals, configuration parameters, and small amounts of data between chips. Two wires are used for communication, including SDA (serial data) and SCL (serial clock).<tr><td style=text-align:left>Inter-IC sound (I2S)<td style=text-align:left>Specifically designed for digital audio data transmission. Uses at least three lines:<ul><li>Serial clock (SCK)<li>Word select (WS)<li>Serial data (SD)</ul><tr><td style=text-align:left>Analog-to-digital converter (ADC)<td style=text-align:left>Converts analog signals (such as sound, light, and temperature) into digital signals for processing, storage, or transmission by computers or other digital systems. <br/>The <code>analog-to-digital</code> conversion process typically involves sampling, quantization, and encoding (such as PCM).<tr><td style=text-align:left>Digital-to-analog converter (DAC)<td style=text-align:left>Converts digital signals (such as, from computers and MP3 players) into analog signals to drive analog devices like speakers or displays. <br/>The <code>digital-to-analog</code> conversion process generates corresponding analog voltage or current outputs based on the digital input values.</table>
<h2 id=audio-connection-architecture>Audio connection architecture</h2>
<p>The audio connection architecture varies depending on the main controller chip. For example, the <code>T5AI</code> includes built-in ADC and DAC interfaces and can implement an audio system without a codec chip. In contrast, the <code>ESP32-S3</code> does not support DAC and requires an external codec chip to build an audio system.</p>
<h3 id=hardware-architecture-for-audio-devices-with-a-built-in-codec>Hardware architecture for audio devices with a built-in codec</h3>
<mermaid value='graph LR
subgraph mic ["Microphone"]
microphone[" Microphone "]
end

subgraph esp32 ["MCU"]
esp_adc["ADC"]
esp_dac["DAC"]
pa_gpio["PA_GPIO"]
end

subgraph ns4150 ["PA"]
ns_in["IN"]
amp["AMP"]
ns_out["OUT"]
ns_ctrl["CTRL"]

%% PA internal connection
ns_in --> amp
amp --> ns_out
end

subgraph speaker_box ["Speaker"]
speaker["Speaker"]
end

microphone -->|"ADC Capture audio signals"| esp_adc
esp_dac -->|"DAC Output audio signal"| ns_in
ns_out -->|"Audio output"| speaker
pa_gpio -->|"Control signals"| ns_ctrl
'></mermaid>
<h3 id=hardware-architecture-for-audio-devices-with-an-external-codec>Hardware architecture for audio devices with an external codec</h3>
<mermaid value='graph LR
subgraph mic [" Microphone "]
microphone["Microphone"]
end

subgraph codec [" CODEC "]
adc["ADC"]
dac["DAC"]
i2s_port["I2S"]
i2c_port["I2C"]

%% Codec internal connection
adc -->|"Data channels"| i2s_port
i2s_port -->|"Data channels"| dac
end

subgraph mcu [" MCU "]
i2s_bus["I2S"]
i2c_bus["I2C"]
pa_gpio["PA_GPIO"]
end

subgraph amplifier [" PA "]
ns_in["IN"]
amp["AMP"]
ns_out["OUT"]
ns_ctrl["CTRL"]

%% PA internal connection
ns_in --> amp
amp --> ns_out
end

subgraph speaker_box ["Speaker"]
speaker["Speaker"]
end

microphone -->|"ADC Capture audio signals"| adc
dac -->|"DAC Output audio signal"| ns_in
i2c_bus -->|"I2C communication"| i2c_port
i2s_bus -->|"I2S Data (PCM coded)"| i2s_port
ns_out -->|"Audio output"| speaker
pa_gpio -->|"Control signals"| ns_ctrl
'></mermaid>
<h2 id=functional-modules>Functional modules</h2>
<p>TuyaOpen aims to deliver a standardized, platform-agnostic audio solution. Its core design philosophy centers on layered decoupling, effectively separating the audio requirements of the application layer from the specific hardware implementations at the underlying level.</p>
<ul>
<li><strong>For application developers</strong>: Regardless of whether the underlying hardware utilizes the T5AI chip or another chip's audio codec, the application layer only needs to invoke a single set of unified, standardized APIs (the <code>tdl_audio_xxx</code> function series), such as <code>tdl_audio_open</code> and <code>tdl_audio_play</code>. This significantly reduces development complexity and enhances code portability.</li>
<li><strong>For driver developers</strong>: When adding support for a new audio chip, developers simply need to adhere to the standard interface defined in <code>tdl_audio_driver.h</code> to write a new TDD-layer driver (similar to <code>tdd_audio.c</code>), and then register it with the TDL management layer. This process requires no modifications to any application-layer code.</li>
</ul>
<h3 id=abstract-management-module-tuya-driver-layer---tdl>Abstract management module (Tuya Driver Layer - TDL)</h3>
<p>This is the highest level of abstraction, providing unified audio service interfaces to the application layer.</p>
<ul>
<li><code>tdl_audio_manage.c/h</code>: Implements the core logic for audio driver management. It maintains a linked list for registering and managing audio device drivers of different types (or for different platforms). Applications use functions like <code>tdl_audio_find</code> and <code>tdl_audio_open</code> to access audio functionality without being concerned with the underlying implementation details.</li>
<li><code>tdl_audio_driver.h</code>: Defines the standardized interface (<code>TDD_AUDIO_INTFS_T</code>) that all audio device drivers must adhere to. This includes function pointers for operations like <code>open</code>, <code>play</code>, <code>config</code>, and <code>close</code>. This ensures that <code>tdl_audio_manage</code> can uniformly interact with any underlying driver that conforms to this standard.</li>
</ul>
<h3 id=instantiation--registration-module-tuya-device-driver---tdd>Instantiation & registration module (Tuya Device Driver - TDD)</h3>
<p>This is the driver's intermediate layer, containing the concrete implementations for specific hardware platforms.</p>
<p><code>tdd_audio.c/h</code>: Implements the audio driver for different platforms. It acts as a bridge, fulfilling the <code>TDD_AUDIO_INTFS_T</code> standard interface defined by the upper TDL layer, while calling the TKL layer or the hardware abstraction interfaces provided by the chip vendor to control the actual hardware. The <code>tdd_audio_register</code> function registers this driver's implementation (function pointers) with the TDL layer.</p>
<h2 id=features>Features</h2>
<p><strong>Audio input (microphone capture)</strong></p>
<ul>
<li>Start and stop: Audio capture can be started and stopped using <code>tdl_audio_open</code> and <code>tdl_audio_close</code>.</li>
<li>Asynchronous data callback: The driver employs a callback mechanism (<code>TDL_AUDIO_MIC_CB</code>) to push captured audio data to the application layer in real-time, frame by frame. The application layer passively receives data instead of proactively polling, leading to higher efficiency.</li>
<li>Status notification: The callback function delivers not only audio data but also the current status (<code>TDL_AUDIO_STATUS_E</code>), such as notifying the application of "Voice Activity Detected (<code>VAD_START</code>)" or "Voice Activity Ended (<code>VAD_END</code>)".</li>
</ul>
<p><strong>Audio output (speaker playback)</strong></p>
<ul>
<li>Play audio stream: The application layer can send audio data blocks (for example, in PCM format) to the driver via the <code>tdl_audio_play</code> function, which then routes them to the hardware for playback.</li>
<li>Playback control: Playback can be stopped immediately by calling <code>tdl_audio_play_stop</code> at any time to clear the playback buffer.</li>
</ul>
<p><strong>Volume control</strong></p>
<ul>
<li>Set volume: The playback volume of the speaker can be adjusted dynamically (ranging from 0 to 100) at runtime using the <code>tdl_audio_volume_set</code> function.</li>
</ul>
<p><strong>Acoustic echo cancellation (AEC)</strong></p>
<ul>
<li>Configurable AEC: During audio device initialization, you can choose to enable or disable the AEC function (requires hardware support) through a configuration option (<code>aec_enable</code>).</li>
<li>Enhanced call experience: AEC is a key technology for achieving full-duplex voice calls (simultaneous speaking and listening without producing echo). The driver's built-in AEC support enables it to meet the demands of advanced applications like voice chats and video calls.</li>
</ul>
<p><strong>Extensible driver management</strong></p>
<ul>
<li>Dynamic registration and discovery: The system can register multiple different audio drivers simultaneously (such as an onboard codec and an external USB sound card).</li>
<li>Lookup by name: The application layer can look up and obtain the handle to a specific audio device (<code>tdl_audio_find</code>) using a string name (such as <code>audio_codec</code>). Therefore, you can easily find the desired devices.</li>
</ul>
<h2 id=supported-peripherals>Supported peripherals</h2>
<table><thead><tr><th style=text-align:center>Codec<th style=text-align:center>Audio recording<th style=text-align:center>Playback<tbody><tr><td style=text-align:center>ES8311<td style=text-align:center>✅<td style=text-align:center>✅<tr><td style=text-align:center>ES8388<td style=text-align:center>✅<td style=text-align:center>✅<tr><td style=text-align:center>ES8389<td style=text-align:center>✅<td style=text-align:center>✅<tr><td style=text-align:center>…<td style=text-align:center><td style=text-align:center></table>
<h2 id=workflow>Workflow</h2>
<p>Using the T5AI as an example, this section describes how the audio driver framework works.</p>
<mermaid value="sequenceDiagram
    participant App as App
    participant TAL as Audio Abstraction Layer
    participant TDD as Audio Device Driver
    participant Bd as Board-level Configuration

    Note over App, Bd: Register audio device

    Bd->>+TDD: Call tdd_audio_register
    Note right of Bd: Pass AUDIO_CODEC_NAME<br/>Pass TDD_AUDIO_T5AI_T config parameters<br/>- ai_chn: TKL_AI_0<br/>- sample_rate: TKL_AUDIO_SAMPLE_16K<br/>- data_bits: TKL_AUDIO_DATABITS_16<br/>- channel: TKL_AUDIO_CHANNEL_MONO<br/>- spk_pin: BOARD_SPEAKER_EN_PIN<br/>- aec_enable: 0/1

    TDD->>+TAL: Call tdl_audio_driver_register
    Note right of TDD: Register device name<br/>Register audio interface (TDD_AUDIO_INTFS_T)<br/>- __tdd_audio_open<br/>- __tdd_audio_close<br/>- __tdd_audio_play<br/>- __tdd_audio_config<br/>- __tdd_audio_set_volume

    Note over TAL: Create an audio node (TDL_AUDIO_NODE_T)<br/> Add the node to the audio list (__audio_node_add)

    TAL-->>-TDD: Return registration results
    TDD-->>-Bd: Return registration results

    Note over App, Bd: Get audio device handle

    App->>+TAL: Call tdl_audio_find
    Note over TAL: Find the audio device in the list by device name<br/>Return the audio node handle
    TAL-->>-App: Return the audio device handle

    Note over App, Bd: Power on audio device

    App->>+TAL: Call tdl_audio_open
    TAL->>+TDD: Call __tdd_audio_open
    Note right of TDD: Initialize audio hardware<br/>Configure ADC/DAC parameters<br/>Set I2S interface<br/>Configure speaker enable pin
    TDD-->>-TAL: Return the power-on result
    TAL-->>-App: Return the device power-on result

    Note over App, Bd: Configure audio parameters

    App->>+TAL: Call the audio configuration interface
    TAL->>+TDD: Call __tdd_audio_config
    Note right of TDD: Set sample rate<br/> Set data bit depth<br/> Set channel configuration<br/> Configure echo cancellation (if enabled)
    TDD-->>-TAL: Return configuration results
    TAL-->>-App: Return configuration results

    Note over App, Bd: Set volume

    App->>+TAL: Call tdl_audio_volume_set
    TAL->>+TDD: Call __tdd_audio_set_volume
    Note right of TDD: Adjust audio output volume<br/>Control speaker amplifier
    TDD-->>-TAL: Return the volume setting result
    TAL-->>-App: Return the volume setting result

    Note over App, Bd: Play back audio

    App->>+TAL: Call tdl_audio_play
    Note right of App: Pass audio frame data<br/>Pass frame format (TDL_AUDIO_FRAME_FORMAT_E)
    TAL->>+TDD: Call __tdd_audio_play
    TAL->>TDD: Call __tkl_audio_frame_put
    Note right of TDD: Process audio frame data<br/> Output to DAC/I2S<br/> Control speaker enable
    TDD-->>-TAL: Return playback results
    TAL-->>-App: Return playback results

    Note over App, Bd: Stop audio playback

    App->>+TAL: Call tdl_audio_play_stop
    TAL->>+TDD: Stop audio playback
    Note right of TDD: Stop audio output<br/>Disable speakers
    TDD-->>-TAL: Return results of stopping audio playback
    TAL-->>-App: Return results of stopping audio playback

    Note over App, Bd: Power off audio device

    App->>+TAL: Call tdl_audio_close
    TAL->>+TDD: Call __tdd_audio_close
    Note right of TDD: Deinitialize audio hardware<br/> Release I2S resources<br/>Disable speaker pins
    TDD-->>-TAL: Return power-off results
    TAL-->>-App: Return the device power-off result
"></mermaid>
<h2 id=development-guide>Development guide</h2>
<h3 id=kconfig-configuration>Kconfig configuration</h3>
<p>To include the driver in the build, verify that the relevant <code>Kconfig</code> options are enabled before building. In your target project directory, run <code>tos.py config menu</code> on the terminal and check the following configuration options:</p>
<table><thead><tr><th style=text-align:left>Macro<th style=text-align:left>Type<th>Description<tbody><tr><td style=text-align:left>enable audio codecs<td style=text-align:left>Boolean<td>The driver code is included in the compilation only when this macro is enabled.<tr><td style=text-align:left>audio support AEC<td style=text-align:left>Boolean<td>Enables the AEC feature (requires hardware support).<tr><td style=text-align:left>the name of audio codec<td style=text-align:left>String<td>Configures the device name for the codec.<tr><td style=text-align:left>the num of audio codecs<td style=text-align:left>Integer<td>Configures the number of board-level codecs.</table>
<p><img alt=open_audio src=/assets/images/open_audio-c2c194ce0d4a362f5128872aaafb961b.png width=681 height=274 /></p>
<admonition type=tip><p>These configuration items must be supported in both <code>src/peripherals/audio_codecs/Kconfig</code> and <code>boards/&lt;target_platform>/&lt;target_board>/Kconfig</code> (Check the <code>Kconfig</code> file for your specific target board). If you cannot find the relevant configuration items, please review the contents of these two files.</p></admonition>
<h3 id=runtime-environment>Runtime environment</h3>
<p>To run this driver, you need to first enable the <strong>master enable macro</strong> (<code>ENABLE_AUDIO_CODECS</code>). There are three scenarios where this macro becomes active: <strong>Enabled by default for the target board</strong>, <strong>enabled as a dependency by another feature that requires the audio driver</strong>, and <strong>manually enabled</strong>.</p>
<admonition type=warning><p>All subsequent commands must be executed from your target application directory. Do not run them from the TuyaOpen root directory or any other location, as this will cause errors.</p></admonition>
<h4 id=scenario-1-enabled-by-default-for-the-target-board>Scenario 1: Enabled by default for the target board</h4>
<admonition type=info><p>This applies when your selected development board comes with a pre-registered audio device. In this case, the board's source files already contain the necessary registration code.<p>Example: The TUYA_T5AI_EVB board supports both a microphone and a speaker. During its adaptation, the audio device was pre-registered, and the <code>boards/T5AI/TUYA_T5AI_EVB/Kconfig</code> file includes the line <code>select ENABLE_AUDIO_CODECS</code>. For specific sample code and configuration, refer to <code>boards/T5AI/TUYA_T5AI_EVB</code>.</p></admonition>
<p>The driver will be enabled automatically whenever this target board is selected.</p>
<p>Run the command to enter the <code>Kconfig</code> menu interface.</p>
<pre><code class=language-shell>tos.py config menu
</code></pre>
<admonition type=warning><p>After executing <code>select ENABLE_XXX</code> in <code>boards/T5AI/TUYA_T5AI_EVB/Kconfig</code>, you cannot manually select/deselect it by executing <code>tos.py config menu</code>.</p></admonition>
<h4 id=scenario-2-enabled-as-a-dependency-by-another-feature-that-requires-the-audio-driver>Scenario 2: Enabled as a dependency by another feature that requires the audio driver</h4>
<p>If you enable a feature that depends on the audio driver, the audio driver's enable macro will be activated automatically.</p>
<h4 id=scenario-3-manually-enable-the-macro>Scenario 3: Manually enable the macro</h4>
<ol>
<li>
<p>Run the command to enter the <code>Kconfig</code> menu interface.</p>
<pre><code class=language-shell>tos.py config menu
</code></pre>
</li>
<li>
<p>Manually locate and enable the macro.</p>
</li>
</ol>
<p><img alt=open_audio src=/assets/images/open_audio-c2c194ce0d4a362f5128872aaafb961b.png width=681 height=274 /></p>
<h3 id=how-to-use>How to use</h3>
<h4 id=adapt-an-audio-driver>Adapt an audio driver</h4>
<admonition type=tip><p>You can skip this step if a suitable driver for your audio hardware already exists in <a href=https://github.com/tuya/TuyaOpen/tree/master/boards/ESP32/common/audio>tdd_audio</a>. If not, you can adapt an audio driver yourself by following this process:</p></admonition>
<ol>
<li>Create <code>tdd_audio_xxx.c/h</code> files within <code>src/peripherals/audio_codecs/tdd_audio</code>.</li>
<li><strong>Allocate memory</strong> for the device and implement the abstract audio driver interfaces (function pointers such as <code>open</code>, <code>close</code>, <code>play</code>, and <code>config</code>) according to your specific hardware.</li>
<li>Call the interface to <strong>register a generic audio device node</strong> (<code>tdl_audio_driver_register()</code>).</li>
<li>Refer to the already adapted drivers for example implementation code.</li>
</ol>
<pre><code class=language-c>OPERATE_RET tdd_audio_register(char *name, TDD_AUDIO_T5AI_T cfg)
{
    OPERATE_RET rt = OPRT_OK;

    TDD_AUDIO_DATA_HANDLE_T *_hdl = NULL;
    TDD_AUDIO_INTFS_T intfs = {0};

    /* Allocate memory to the device */
    _hdl = (TDD_AUDIO_DATA_HANDLE_T *)tal_malloc(sizeof(TDD_AUDIO_DATA_HANDLE_T));
    memset(_hdl, 0, sizeof(TDD_AUDIO_DATA_HANDLE_T));
    g_tdd_audio_hdl = _hdl;
    _hdl->play_volume = 80;
    memcpy(&_hdl->cfg, &cfg, sizeof(TDD_AUDIO_T5AI_T));

    /* Register function pointers */
    intfs.open = __tdd_audio_open;
    intfs.play = __tdd_audio_play;
    intfs.config = __tdd_audio_config;
    intfs.close = __tdd_audio_close;

    tdl_audio_driver_register(name, &intfs, (TDD_AUDIO_HANDLE_T)_hdl);
    return rt;
}
</code></pre>
<admonition type=warning><p>When adapting a driver for ESP32, you need to create new files under the <code>boards/ESP32/common/audio</code> directory. Pre-adapted drivers for ESP32-compatible codec chips are also located in this path.</p></admonition>
<h4 id=register-an-audio-device>Register an audio device</h4>
<admonition type=tip><p>If your selected target board already has an audio device pre-registered, you only need to select that target board in the <code>Kconfig</code>, and call the <code>board_register_hardware()</code> interface in your application. This interface already includes the registration for the corresponding audio device.</p></admonition>
<ol>
<li>Implement the registration interface based on the audio codec model and connection pins. It is recommended to place this implementation within the <code>board_register_hardware()</code> interface, located at <code>boards/&lt;target_platform>/&lt;target_board>/xxx.c</code>.</li>
<li>Configure the device's basic information and call the registration interface within <code>board_register_hardware()</code>.</li>
</ol>
<pre><code class=language-c>OPERATE_RET __board_register_audio(void)
{
    /* Write your struct configuration information here */
    /* begin */

    /* end */
    TUYA_CALL_ERR_RETURN(tdd_audio_register(AUDIO_CODEC_NAME, cfg));
    return rt;
}

OPERATE_RET board_register_hardware(void)
{
	TUYA_CALL_ERR_LOG(__board_register_audio());
	return rt;
}
</code></pre>
<h4 id=control-the-device>Control the device</h4>
<p>Utilize the TDL interfaces provided in <code>src/peripherals/audio_codecs/tdl_audio/include/tdl_audio_manage.h</code> to control the audio device.</p>
<ul>
<li>Locate the device handle by its device name.</li>
<li>Power on and initialize the audio device.</li>
<li>Power off the audio device and release associated resources.</li>
<li>Dynamically adjust the audio output volume.</li>
<li>Play audio data.</li>
<li>Stop playing audio data.</li>
</ul>
<p>For a concrete implementation example, refer to <code>examples/multimedia/audio</code>.</p>
<h2 id=api-description>API description</h2>
<h3 id=configure-structure>Configure structure</h3>
<p>Construct the hardware configuration information structure for the TDD layer. The following example uses the T5AI platform.</p>
<pre><code class=language-c>/**
 * @brief Audio device configuration structure for T5AI board.
 *
 * This structure contains all hardware configuration parameters for the audio device,
 * including sample rate, data bits, channels, speaker control pins, and AEC settings.
 */
typedef struct {
    uint8_t aec_enable;
    TKL_AI_CHN_E ai_chn;
    TKL_AUDIO_SAMPLE_E sample_rate;
    TKL_AUDIO_DATABITS_E data_bits;
    TKL_AUDIO_CHANNEL_E channel;

    // spk
    TKL_AUDIO_SAMPLE_E spk_sample_rate;
    int spk_pin;
    int spk_pin_polarity;
} TDD_AUDIO_T5AI_T;
</code></pre>
<h3 id=register-structure>Register structure</h3>
<p>To register a structure for your audio driver, you need to implement the corresponding function pointers based on your audio driver.</p>
<pre><code class=language-c>/**
 * @brief Audio driver interface structure.
 *
 * This structure contains function pointers for all audio operations, providing
 * a unified interface for the audio abstract layer to call driver functions.
 */
typedef struct {
    OPERATE_RET (*open)(TDD_AUDIO_HANDLE_T handle, TDL_AUDIO_MIC_CB mic_cb);
    OPERATE_RET (*play)(TDD_AUDIO_HANDLE_T handle, uint8_t *data, uint32_t len);
    OPERATE_RET (*config)(TDD_AUDIO_HANDLE_T handle, TDD_AUDIO_CMD_E cmd, void *args);
    OPERATE_RET (*close)(TDD_AUDIO_HANDLE_T handle);
} TDD_AUDIO_INTFS_T;
</code></pre>
<h3 id=register-an-audio-device-1>Register an audio device</h3>
<p>Registering the audio device driver with the system is the entry point for the audio driver framework. By passing in the device name and configuration parameters, you add the audio device to the management list for use by the application.</p>
<pre><code class=language-c>/**
 * @brief Registers an audio device driver with the audio management system.
 *
 * This function registers an audio device driver including device name, hardware
 * configuration parameters, and driver interface functions. After successful
 * registration, applications can find and use the audio device by name.
 *
 * @param name Audio device name used for identification and lookup
 * @param cfg Audio device configuration parameters including sample rate, data bits,
 * channels, speaker pin configuration, etc.
 *
 * @return Returns OPRT_OK on successful registration, or an appropriate error code on failure.
 */
OPERATE_RET tdd_audio_register(const char *name, TDD_AUDIO_T5AI_T cfg);
</code></pre>
<h3 id=register-an-audio-driver>Register an audio driver</h3>
<p>Register the underlying audio driver interface to the abstraction layer management system, create device nodes, and maintain the device list.</p>
<pre><code class=language-c>/**
 * @brief Registers audio device driver interfaces to the abstract layer management system.
 *
 * This function registers audio device driver interface functions to the audio abstract
 * layer management system, creates device nodes and adds them to the device management list
 * for upper layer application calls.
 *
 * @param name Audio device name
 * @param intfs Audio driver interface structure containing various operation function pointers
 *
 * @return Returns OPRT_OK on successful registration, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_driver_register(const char *name, TDD_AUDIO_INTFS_T *intfs);

</code></pre>
<h3 id=locate-and-manage-a-device>Locate and manage a device</h3>
<p>Based on the device name, locate the specified device handle in the list of registered audio devices. This is the key interface for gaining control of the device.</p>
<pre><code class=language-c>/**
 * @brief Finds an audio device by device name.
 *
 * This function searches for the corresponding audio device node in the registered
 * audio device list based on the device name, and returns a device handle for
 * subsequent operations.
 *
 * @param name Name of the audio device to find
 *
 * @return Returns audio device handle, or NULL if not found.
 */
TDL_AUDIO_HANDLE_T tdl_audio_find(const char *name);

</code></pre>
<h3 id=power-on-a-device>Power on a device</h3>
<p>Power on and initialize the audio device, including hardware initialization, pin configuration, and other necessary operations, to make the device fully functional.</p>
<pre><code class=language-c>/**
 * @brief Opens and initializes an audio device.
 *
 * This function opens the specified audio device and initializes audio hardware
 * including ADC/DAC, I2S interface, speaker enable pins, etc. After successful
 * opening, the device enters a usable state.
 *
 * @param audio_hdl Audio device handle
 *
 * @return Returns OPRT_OK on successful opening, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_open(TDL_AUDIO_HANDLE_T audio_hdl);

</code></pre>
<h3 id=power-off-a-device>Power off a device</h3>
<p>Power off the audio device and release related resources, including cleaning up by deinitializing hardware and disabling pins.</p>
<pre><code class=language-c>/**
 * @brief Closes and deinitializes an audio device.
 *
 * This function closes the specified audio device and deinitializes audio hardware
 * including releasing I2S resources, disabling speaker pins, closing ADC/DAC, etc.
 * After closing, the device becomes unavailable and needs to be reopened for use.
 *
 * @param audio_hdl Audio device handle
 *
 * @return Returns OPRT_OK on successful closing, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_close(TDL_AUDIO_HANDLE_T audio_hdl);

</code></pre>
<h3 id=adjust-the-volume>Adjust the volume</h3>
<p>Dynamically adjust the audio output volume and control the speaker amplifier gain.</p>
<pre><code class=language-c>/**
 * @brief Sets audio output volume.
 *
 * This function adjusts the output volume of the audio device, controls the gain
 * of the speaker amplifier, and implements dynamic volume adjustment functionality.
 *
 * @param audio_hdl Audio device handle
 * @param volume Volume value, typically ranging from 0-100
 *
 * @return Returns OPRT_OK on successful setting, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_volume_set(TDL_AUDIO_HANDLE_T audio_hdl, uint8_t volume);

</code></pre>
<h3 id=control-audio-playback>Control audio playback</h3>
<p>Play audio data and output audio frames to the speaker through the hardware interface.</p>
<pre><code class=language-c>/**
 * @brief Plays audio data.
 *
 * This function sends audio frame data to the audio device for playback. Data is
 * output to the speaker through DAC or I2S interface. Supports different audio
 * frame formats.
 *
 * @param audio_hdl Audio device handle
 * @param frame_data Audio frame data pointer
 * @param frame_size Audio frame data size
 * @param format Audio frame format
 *
 * @return Returns OPRT_OK on successful playback, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_play(TDL_AUDIO_HANDLE_T audio_hdl, void *frame_data, uint32_t frame_size,
                           TDL_AUDIO_FRAME_FORMAT_E format);

</code></pre>
<h3 id=stop-audio-playback>Stop audio playback</h3>
<p>Stop the current audio playback, turn off the audio output, and mute the device.</p>
<pre><code class=language-c>/**
 * @brief Stops audio playback.
 *
 * This function stops the currently ongoing audio playback, closes audio output,
 * disables speaker amplifier, and puts the device into a mute state.
 *
 * @param audio_hdl Audio device handle
 *
 * @return Returns OPRT_OK on successful stopping, or an appropriate error code on failure.
 */
OPERATE_RET tdl_audio_play_stop(TDL_AUDIO_HANDLE_T audio_hdl);

</code></pre></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/peripheral/audio.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/peripheral/display><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Display Driver</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/peripheral/button><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Button Driver</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#overview class="table-of-contents__link toc-highlight">Overview</a><li><a href=#fundamental-concepts class="table-of-contents__link toc-highlight">Fundamental concepts</a><li><a href=#audio-connection-architecture class="table-of-contents__link toc-highlight">Audio connection architecture</a><ul><li><a href=#hardware-architecture-for-audio-devices-with-a-built-in-codec class="table-of-contents__link toc-highlight">Hardware architecture for audio devices with a built-in codec</a><li><a href=#hardware-architecture-for-audio-devices-with-an-external-codec class="table-of-contents__link toc-highlight">Hardware architecture for audio devices with an external codec</a></ul><li><a href=#functional-modules class="table-of-contents__link toc-highlight">Functional modules</a><ul><li><a href=#abstract-management-module-tuya-driver-layer---tdl class="table-of-contents__link toc-highlight">Abstract management module (Tuya Driver Layer - TDL)</a><li><a href=#instantiation--registration-module-tuya-device-driver---tdd class="table-of-contents__link toc-highlight">Instantiation & registration module (Tuya Device Driver - TDD)</a></ul><li><a href=#features class="table-of-contents__link toc-highlight">Features</a><li><a href=#supported-peripherals class="table-of-contents__link toc-highlight">Supported peripherals</a><li><a href=#workflow class="table-of-contents__link toc-highlight">Workflow</a><li><a href=#development-guide class="table-of-contents__link toc-highlight">Development guide</a><ul><li><a href=#kconfig-configuration class="table-of-contents__link toc-highlight">Kconfig configuration</a><li><a href=#runtime-environment class="table-of-contents__link toc-highlight">Runtime environment</a><li><a href=#how-to-use class="table-of-contents__link toc-highlight">How to use</a></ul><li><a href=#api-description class="table-of-contents__link toc-highlight">API description</a><ul><li><a href=#configure-structure class="table-of-contents__link toc-highlight">Configure structure</a><li><a href=#register-structure class="table-of-contents__link toc-highlight">Register structure</a><li><a href=#register-an-audio-device-1 class="table-of-contents__link toc-highlight">Register an audio device</a><li><a href=#register-an-audio-driver class="table-of-contents__link toc-highlight">Register an audio driver</a><li><a href=#locate-and-manage-a-device class="table-of-contents__link toc-highlight">Locate and manage a device</a><li><a href=#power-on-a-device class="table-of-contents__link toc-highlight">Power on a device</a><li><a href=#power-off-a-device class="table-of-contents__link toc-highlight">Power off a device</a><li><a href=#adjust-the-volume class="table-of-contents__link toc-highlight">Adjust the volume</a><li><a href=#control-audio-playback class="table-of-contents__link toc-highlight">Control audio playback</a><li><a href=#stop-audio-playback class="table-of-contents__link toc-highlight">Stop audio playback</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/quick-start/unboxing>Tutorial</a><li class=footer__item><a class=footer__link-item href=/pricing>Service</a><li class=footer__item><a class=footer__link-item href=/docs/hardware-specific>Hardware List</a><li class=footer__item><a class=footer__link-item href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board>Tuya T5AI Dev Kit</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Tools</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=footer__link-item>Web Serial Tool<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.com/invite/yPPShSTttG target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/tuyasmart target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@tuya2023 target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/tuya-smart target=_blank rel="noopener noreferrer" class=footer__link-item>Linkedin<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gitee.com/tuya-open/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>Gitee(Mirror)<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Acknowledgements</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://storyset.com/technology target=_blank rel="noopener noreferrer" class=footer__link-item>Thanks for the technology illustrations by Storyset<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>
        <p style="font-weight: 500;">Copyright © TuyaOpen Authors 2025 | Documentation Distributed under Apache License Version 2.0</p>
      </div></div></div></footer></div></body>