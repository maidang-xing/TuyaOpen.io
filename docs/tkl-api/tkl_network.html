<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tkl-api/tkl_network" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>tkl_network | Networking APIs | TuyaOpen</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true name=twitter:image content=https://tuyaopen.io/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true property=og:url content=https://tuyaopen.io/docs/tkl-api/tkl_network /><meta data-rh=true property=og:locale content=en /><meta data-rh=true property=og:locale:alternate content=zh /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="tkl_network | Networking APIs | TuyaOpen"/><meta data-rh=true name=description content="The tkl_network.c file provides a series of APIs required for network communication processes to adapt to different network interfaces. These APIs include creating sockets, connecting, binding, listening, sending data, receiving data, setting and getting socket options, and other network operations. The file defines common handling of network APIs and allows for cross-platform network communication through these encapsulated functions."/><meta data-rh=true property=og:description content="The tkl_network.c file provides a series of APIs required for network communication processes to adapt to different network interfaces. These APIs include creating sockets, connecting, binding, listening, sending data, receiving data, setting and getting socket options, and other network operations. The file defines common handling of network APIs and allows for cross-platform network communication through these encapsulated functions."/><link data-rh=true rel=icon href=/img/favicon.ico /><link data-rh=true rel=canonical href=https://tuyaopen.io/docs/tkl-api/tkl_network /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/tkl-api/tkl_network hreflang=en /><link data-rh=true rel=alternate href=https://tuyaopen.io/zh/docs/tkl-api/tkl_network hreflang=zh /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/tkl-api/tkl_network hreflang=x-default /><link data-rh=true rel=preconnect href=https://NT1L7IWROF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://tuyaopen.io/docs/tkl-api/tkl_network","name":"tkl_network | Networking APIs","position":1}]}</script><link rel=alternate type=application/rss+xml href=/blog/rss.xml title="TuyaOpen RSS Feed"><link rel=alternate type=application/atom+xml href=/blog/atom.xml title="TuyaOpen Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-3M0J54E8XF"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3M0J54E8XF",{})</script><link rel=search type=application/opensearchdescription+xml title=TuyaOpen href=/opensearch.xml><link rel=preconnect href=https://www.clarity.ms><script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/"+r,(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script","lggqck9srz")</script><meta name=algolia-site-verification content=6232065417750C16><link rel=stylesheet href=/assets/css/styles.ee9e0cf5.css /><script src=/assets/js/runtime~main.62c5001a.js defer></script><script src=/assets/js/main.c3d91c71.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">TuyaOpen</b></a><a class="navbar__item navbar__link" href=/docs/about-tuyaopen>Documentation</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Get Yours</a><ul class=dropdown__menu><li><a class=dropdown__link href=/pricing>Get License Key</a><li><a class=dropdown__link href=/get-hardware>Get Hardware</a><li><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=dropdown__link>Get Code<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><a class="navbar__item navbar__link" href=/blog>Blog</a><a class="navbar__item navbar__link" href=/projects>Projects</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Tools</a><ul class=dropdown__menu><li><a class=dropdown__link href=/tools/tyutool>Universal Serial Port Tools</a><li><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=dropdown__link>Web Serial/Flashing Tools<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>English</a><ul class=dropdown__menu><li><a href=/docs/tkl-api/tkl_network target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=en>English</a><li><a href=/zh/docs/tkl-api/tkl_network target=_self rel="noopener noreferrer" class=dropdown__link lang=zh>简体中文</a></ul></div><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label=GitHub></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/><img src=/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/><b>TuyaOpen</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/about-tuyaopen><span title="About TuyaOpen" class=linkLabel_WmDU>About TuyaOpen</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/maintenance-and-releases><span title="Technical Roadmap & Releases" class=linkLabel_WmDU>Technical Roadmap & Releases</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/project-walkthrough><span title="Directory Structure" class=linkLabel_WmDU>Directory Structure</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/quick-start><span title="Getting Started" class=categoryLinkLabel_W154>Getting Started</span></a><button aria-label="Collapse sidebar category 'Getting Started'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/unboxing><span title="Unboxing Use" class=linkLabel_WmDU>Unboxing Use</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/enviroment-setup><span title="Set up Environment" class=linkLabel_WmDU>Set up Environment</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/project-compilation><span title="Build Project" class=linkLabel_WmDU>Build Project</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/firmware-burning><span title="Flashing and Logging" class=linkLabel_WmDU>Flashing and Logging</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/equipment-authorization><span title="Authorize Devices" class=linkLabel_WmDU>Authorize Devices</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/device-network-configuration><span title="Device Pairing" class=linkLabel_WmDU>Device Pairing</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/quick-start/device-debug><span title="Device Debugging" class=linkLabel_WmDU>Device Debugging</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/hardware-specific><span title="Hardware Guides" class=categoryLinkLabel_W154>Hardware Guides</span></a><button aria-label="Collapse sidebar category 'Hardware Guides'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5-AI Board DevKit" class=categoryLinkLabel_W154>T5-AI Board DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5AI-Board Overview" class=linkLabel_WmDU>T5AI-Board Overview</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5-AI Core DevKit" class=categoryLinkLabel_W154>T5-AI Core DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5AI-Core Overview" class=linkLabel_WmDU>T5AI-Core Overview</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/applications><span title=Applications class=categoryLinkLabel_W154>Applications</span></a><button aria-label="Expand sidebar category 'Applications'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/examples/demo-generic-examples><span title=Examples class=categoryLinkLabel_W154>Examples</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/peripheral/support_peripheral_list><span title=Peripherals class=categoryLinkLabel_W154>Peripherals</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/new-hardware/porting-platform><span title="New Project" class=categoryLinkLabel_W154>New Project</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/docs/cloud/tuya-cloud/creating-new-product><span title="Cloud Services" class=categoryLinkLabel_W154>Cloud Services</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/cloud/tuya-cloud/creating-new-product><span title="Tuya Cloud Platform" class=categoryLinkLabel_W154>Tuya Cloud Platform</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/cloud/tuya-cloud/creating-new-product><span title="Creating New Product" class=linkLabel_WmDU>Creating New Product</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/docs/tkl-api/tkl_mutex><span title="TKL APIs" class=categoryLinkLabel_W154>TKL APIs</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/tkl-api/tkl_mutex><span title="OS APIs" class=categoryLinkLabel_W154>OS APIs</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_mutex><span title="tkl_mutex | Mutex Lock" class=linkLabel_WmDU>tkl_mutex | Mutex Lock</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_semaphore><span title="tkl_semaphore | Semaphore" class=linkLabel_WmDU>tkl_semaphore | Semaphore</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_system><span title="tkl_system | System Interface" class=linkLabel_WmDU>tkl_system | System Interface</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_timer><span title="tkl_timer | Timer Driver" class=linkLabel_WmDU>tkl_timer | Timer Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_thread><span title="tkl_thread | Thread" class=linkLabel_WmDU>tkl_thread | Thread</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_wakeup><span title="tkl_wakeup | Wakeup Driver" class=linkLabel_WmDU>tkl_wakeup | Wakeup Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_ota><span title="tkl_ota | OTA Firmware Update" class=linkLabel_WmDU>tkl_ota | OTA Firmware Update</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_output><span title="tkl_output | Log Output" class=linkLabel_WmDU>tkl_output | Log Output</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/docs/tkl-api/tkl_adc><span title="Hardware Interfaces" class=categoryLinkLabel_W154>Hardware Interfaces</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_adc><span title="tkl_adc | ADC Driver" class=linkLabel_WmDU>tkl_adc | ADC Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_dac><span title="tkl_dac | DAC Driver" class=linkLabel_WmDU>tkl_dac | DAC Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_flash><span title="tkl_flash | Flash Driver" class=linkLabel_WmDU>tkl_flash | Flash Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_gpio><span title="tkl_gipo | GPIO Driver" class=linkLabel_WmDU>tkl_gipo | GPIO Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_i2c><span title="tKl_i2c | I2C Driver" class=linkLabel_WmDU>tKl_i2c | I2C Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_i2s><span title="tlk_i2s | I2S Driver" class=linkLabel_WmDU>tlk_i2s | I2S Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_pinmux><span title="tkl_pinmux | PINMUX Driver" class=linkLabel_WmDU>tkl_pinmux | PINMUX Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_pwm><span title="tkl_pwm | PWM Driver" class=linkLabel_WmDU>tkl_pwm | PWM Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_register><span title="tkl_register | Register Driver" class=linkLabel_WmDU>tkl_register | Register Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_rtc><span title="tkl_rtc | RTC Driver" class=linkLabel_WmDU>tkl_rtc | RTC Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_spi><span title="tkl_spi | SPI Driver" class=linkLabel_WmDU>tkl_spi | SPI Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_uart><span title="tkl_uart | UART Driver" class=linkLabel_WmDU>tkl_uart | UART Driver</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/docs/tkl-api/tkl_wifi><span title=Networking class=categoryLinkLabel_W154>Networking</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_wifi><span title="tkl_wifi | Wi-Fi Driver" class=linkLabel_WmDU>tkl_wifi | Wi-Fi Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_bluetooth><span title="tkl_bluetooth | Bluetooth Driver" class=linkLabel_WmDU>tkl_bluetooth | Bluetooth Driver</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_lwip><span title="tkl_lwip | lwIP Network Stack" class=linkLabel_WmDU>tkl_lwip | lwIP Network Stack</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/tkl-api/tkl_network><span title="tkl_network | Networking APIs" class=linkLabel_WmDU>tkl_network | Networking APIs</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/tkl-api/tkl_wired><span title="tkl_wired | Wired Ethernet Driver" class=linkLabel_WmDU>tkl_wired | Wired Ethernet Driver</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/tos-tools/tos-guide><span title="Tos Tools" class=categoryLinkLabel_W154>Tos Tools</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/build-system/compilation-guide><span title="Build System" class=categoryLinkLabel_W154>Build System</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/faqs><span title=FAQs class=linkLabel_WmDU>FAQs</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/contribute/contribute-guide><span title=Contribute class=categoryLinkLabel_W154>Contribute</span></a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>TKL APIs</span><li class=breadcrumbs__item><span class=breadcrumbs__link>Networking</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>tkl_network | Networking APIs</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1 id=tkl_network--networking-apis>tkl_network | Networking APIs</h1></header>
<p>The <code>tkl_network.c</code> file provides a series of APIs required for network communication processes to adapt to different network interfaces. These APIs include creating sockets, connecting, binding, listening, sending data, receiving data, setting and getting socket options, and other network operations. The file defines common handling of network APIs and allows for cross-platform network communication through these encapsulated functions.</p>
<h2 id=api-description>API Description</h2>
<h3 id=tkl_net_get_errno>tkl_net_get_errno</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_get_errno(void);
</code></pre>
<h4 id=function>Function</h4>
<p>Retrieves the network error code.</p>
<h4 id=parameters>Parameters</h4>
<p>No parameters.</p>
<h4 id=return-value>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_fd_set>tkl_net_fd_set</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_fd_set(const int fd, TUYA_FD_SET_T* fds);
</code></pre>
<h4 id=function-1>Function</h4>
<p>Adds a file descriptor to the set.</p>
<h4 id=parameters-1>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor to be added.</li>
<li><code>fds</code>: Pointer to the file descriptor set.</li>
</ul>
<h4 id=return-value-1>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_fd_clear>tkl_net_fd_clear</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_fd_clear(const int fd, TUYA_FD_SET_T* fds);
</code></pre>
<h4 id=function-2>Function</h4>
<p>Removes a file descriptor from the set.</p>
<h4 id=parameters-2>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor to be cleared.</li>
<li><code>fds</code>: Pointer to the file descriptor set.</li>
</ul>
<h4 id=return-value-2>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_fd_isset>tkl_net_fd_isset</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_fd_isset(const int fd, TUYA_FD_SET_T* fds);
</code></pre>
<h4 id=function-3>Function</h4>
<p>Checks if a file descriptor is in the set.</p>
<h4 id=parameters-3>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor to be checked.</li>
<li><code>fds</code>: Pointer to the file descriptor set.</li>
</ul>
<h4 id=return-value-3>Return Value</h4>
<p>Returns <code>TRUE</code> if the file descriptor is in the set, otherwise returns <code>FALSE</code>.</p>
<h3 id=tkl_net_fd_zero>tkl_net_fd_zero</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_fd_zero(TUYA_FD_SET_T* fds);
</code></pre>
<h4 id=function-4>Function</h4>
<p>Clears all file descriptors in the file descriptor set.</p>
<h4 id=parameters-4>Parameters</h4>
<ul>
<li><code>fds</code>: Pointer to the file descriptor set.</li>
</ul>
<h4 id=return-value-4>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_select>tkl_net_select</h3>
<pre><code class=language-c>int tkl_net_select(const int maxfd, TUYA_FD_SET_T *readfds, TUYA_FD_SET_T *writefds, TUYA_FD_SET_T *errorfds, const uint32_t ms_timeout);
</code></pre>
<h4 id=function-5>Function</h4>
<p>Retrieves the set of available file descriptors.</p>
<h4 id=parameters-5>Parameters</h4>
<ul>
<li><code>maxfd</code>: One more than the maximum number of file descriptors to be checked.</li>
<li><code>readfds</code>: Pointer to the set of readable file descriptors.</li>
<li><code>writefds</code>: Pointer to the set of writable file descriptors.</li>
<li><code>errorfds</code>: Pointer to the set of erroneous file descriptors.</li>
<li><code>ms_timeout</code>: Timeout period in milliseconds.</li>
</ul>
<h4 id=return-value-5>Return Value</h4>
<p>Returns the number of available file descriptors; returns a value less than or equal to 0 on error.</p>
<h3 id=tkl_net_get_nonblock>tkl_net_get_nonblock</h3>
<pre><code class=language-c>int tkl_net_get_nonblock(const int fd);
</code></pre>
<h4 id=function-6>Function</h4>
<p>Retrieves a non-blocking file descriptor.</p>
<h4 id=parameters-6>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
</ul>
<h4 id=return-value-6>Return Value</h4>
<p>Returns the number of non-blocking file descriptors on success; returns a value less than or equal to 0 on error.</p>
<h3 id=tkl_net_set_block>tkl_net_set_block</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_block(const int fd, const BOOL_T block);
</code></pre>
<h4 id=function-7>Function</h4>
<p>Sets the blocking flag for a file descriptor.</p>
<h4 id=parameters-7>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
<li><code>block</code>: If <code>TRUE</code>, sets to blocking mode; if <code>FALSE</code>, sets to non-blocking mode.</li>
</ul>
<h4 id=return-value-7>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_close>tkl_net_close</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_close(const int fd);
</code></pre>
<h4 id=function-8>Function</h4>
<p>Closes a file descriptor.</p>
<h4 id=parameters-8>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
</ul>
<h4 id=return-value-8>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_shutdown>tkl_net_shutdown</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_shutdown(const int fd, const int how);
</code></pre>
<h4 id=function-9>Function</h4>
<p>Shuts down read/write operations on a file descriptor.</p>
<h4 id=parameters-9>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
<li><code>how</code>: The type of shutdown.</li>
</ul>
<h4 id=return-value-9>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_socket_create>tkl_net_socket_create</h3>
<pre><code class=language-c>int tkl_net_socket_create(const TUYA_PROTOCOL_TYPE_E type);
</code></pre>
<h4 id=function-10>Function</h4>
<p>Creates a TCP or UDP socket.</p>
<h4 id=parameters-10>Parameters</h4>
<ul>
<li><code>type</code>: The protocol type, either TCP or UDP.</li>
</ul>
<h4 id=return-value-10>Return Value</h4>
<p>Returns the file descriptor.</p>
<h3 id=tkl_net_connect>tkl_net_connect</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_connect(const int fd, const TUYA_IP_ADDR_T addr, const uint16_t port);
</code></pre>
<h4 id=function-11>Function</h4>
<p>Connects to a network.</p>
<h4 id=parameters-11>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
<li><code>addr</code>: Server address information.</li>
<li><code>port</code>: Server port information.</li>
</ul>
<h4 id=return-value-11>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_connect_raw>tkl_net_connect_raw</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_connect_raw(const int fd, void *p_socket_addr, const int len);
</code></pre>
<h4 id=function-12>Function</h4>
<p>Connects to a network using raw data.</p>
<h4 id=parameters-12>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
<li><code>p_socket_addr</code>: Raw socket data.</li>
<li><code>len</code>: Length of the data.</li>
</ul>
<h4 id=return-value-12>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_bind>tkl_net_bind</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_bind(const int fd, const TUYA_IP_ADDR_T addr, const uint16_t port);
</code></pre>
<h4 id=function-13>Function</h4>
<p>Binds a socket to a network.</p>
<h4 id=parameters-13>Parameters</h4>
<ul>
<li><code>fd</code>: The file descriptor.</li>
<li><code>addr</code>: Server address information.</li>
<li><code>port</code>: Server port information.</li>
</ul>
<h4 id=return-value-13>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_listen>tkl_net_listen</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_listen(const int fd, const int backlog);
</code></pre>
<h4 id=function-14>Function</h4>
<p>Listens for network connection requests.</p>
<h4 id=parameters-14>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>backlog</code>: The maximum number of pending connections the queue can hold.</li>
</ul>
<h4 id=return-value-14>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_accept>tkl_net_accept</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_accept(const int fd, TUYA_IP_ADDR_T *addr, uint16_t *port);
</code></pre>
<h4 id=function-15>Function</h4>
<p>Accepts a network connection request.</p>
<h4 id=parameters-15>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>addr</code>: The IP address of the receiver.</li>
<li><code>port</code>: The port number of the receiver.</li>
</ul>
<h4 id=return-value-15>Return Value</h4>
<p>Returns 0 on success, otherwise returns an error code specific to the target system.</p>
<h3 id=tkl_net_send>tkl_net_send</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_send(const int fd, const void *buf, const uint32_t nbytes);
</code></pre>
<h4 id=function-16>Function</h4>
<p>Sends data over the network.</p>
<h4 id=parameters-16>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf</code>: The buffer containing the data to be sent.</li>
<li><code>nbytes</code>: The length of the buffer.</li>
</ul>
<h4 id=return-value-16>Return Value</h4>
<p>The number of bytes sent; returns a negative value on error.</p>
<h3 id=tkl_net_send_to>tkl_net_send_to</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_send_to(const int fd, const void *buf, const uint32_t nbytes, const TUYA_IP_ADDR_T addr, const uint16_t port);
</code></pre>
<h4 id=function-17>Function</h4>
<p>Sends data to a specified server.</p>
<h4 id=parameters-17>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf</code>: The buffer containing the data to be sent.</li>
<li><code>nbytes</code>: The length of the buffer.</li>
<li><code>addr</code>: Server address information.</li>
<li><code>port</code>: Server port information.</li>
</ul>
<h4 id=return-value-17>Return Value</h4>
<p>The number of bytes sent; returns a negative value on error.</p>
<h3 id=tkl_net_recv>tkl_net_recv</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_recv(const int fd, void *buf, const uint32_t nbytes);
</code></pre>
<h4 id=function-18>Function</h4>
<p>Receives data from the network.</p>
<h4 id=parameters-18>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf</code>: The buffer to store the received data.</li>
<li><code>nbytes</code>: The length of the buffer.</li>
</ul>
<h4 id=return-value-18>Return Value</h4>
<p>The number of bytes received; returns a negative value on error.</p>
<h3 id=tkl_net_recv_nd_size>tkl_net_recv_nd_size</h3>
<pre><code class=language-c>int tkl_net_recv_nd_size(const int fd, void *buf, const uint32_t buf_size, const uint32_t nd_size);
</code></pre>
<h4 id=function-19>Function</h4>
<p>Receives data of a specified size from the network.</p>
<h4 id=parameters-19>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf</code>: The buffer to store the received data.</li>
<li><code>buf_size</code>: The size of the buffer.</li>
<li><code>nd_size</code>: The expected size of the data to be received.</li>
</ul>
<h4 id=return-value-19>Return Value</h4>
<p>The actual amount of data received on success, or a negative value on error.</p>
<h3 id=tkl_net_recvfrom>tkl_net_recvfrom</h3>
<pre><code class=language-c>TUYA_ERRNO tkl_net_recvfrom(const int fd, void *buf, const uint32_t nbytes, TUYA_IP_ADDR_T *addr, uint16_t *port);
</code></pre>
<h4 id=function-20>Function</h4>
<p>Receives data from a specified server.</p>
<h4 id=parameters-20>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf</code>: The buffer to store the received data.</li>
<li><code>nbytes</code>: The length of the buffer.</li>
<li><code>addr</code>[OUT]: Server address information.</li>
<li><code>port</code>[OUT]: Server port information.</li>
</ul>
<h4 id=return-value-20>Return Value</h4>
<p>The number of bytes received; returns a negative value on error.</p>
<h3 id=tkl_net_gethostbyname>tkl_net_gethostbyname</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_gethostbyname(const char *domain, TUYA_IP_ADDR_T *addr);
</code></pre>
<h4 id=function-21>Function</h4>
<p>Obtains address information by domain name.</p>
<h4 id=parameters-21>Parameters</h4>
<ul>
<li><code>domain</code>: Domain name information.</li>
<li><code>addr</code>: Pointer to store the address information.</li>
</ul>
<h4 id=return-value-21>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_socket_bind>tkl_net_socket_bind</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_socket_bind(const int fd, const char *ip);
</code></pre>
<h4 id=function-22>Function</h4>
<p>Binds the socket to a network with the specified IP.</p>
<h4 id=parameters-22>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>ip</code>: IP address.</li>
</ul>
<h4 id=return-value-22>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_cloexec>tkl_net_set_cloexec</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_cloexec(const int fd);
</code></pre>
<h4 id=function-23>Function</h4>
<p>Sets the socket to remain open in child processes after a <code>fork</code> call.</p>
<h4 id=parameters-23>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
</ul>
<h4 id=return-value-23>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_get_socket_ip>tkl_net_get_socket_ip</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_get_socket_ip(const int fd, TUYA_IP_ADDR_T *addr);
</code></pre>
<h4 id=function-24>Function</h4>
<p>Obtains the IP address via the socket descriptor.</p>
<h4 id=parameters-24>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>addr</code>: Pointer to store the IP address.</li>
</ul>
<h4 id=return-value-24>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_str2addr>tkl_net_str2addr</h3>
<pre><code class=language-c>TUYA_IP_ADDR_T tkl_net_str2addr(const char *ip_str);
</code></pre>
<h4 id=function-25>Function</h4>
<p>Converts an IP string to an address.</p>
<h4 id=parameters-25>Parameters</h4>
<ul>
<li><code>ip_str</code>: IP string.</li>
</ul>
<h4 id=return-value-25>Return Value</h4>
<p>Returns the converted IP address.</p>
<h3 id=tkl_net_setsockopt>tkl_net_setsockopt</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_setsockopt(const int fd, const TUYA_OPT_LEVEL level, const TUYA_OPT_NAME optname, const void *optval, const int optlen);
</code></pre>
<h4 id=function-26>Function</h4>
<p>Sets socket options.</p>
<h4 id=parameters-26>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>level</code>: The level at which the option is defined.</li>
<li><code>optname</code>: The option name.</li>
<li><code>optval</code>: A pointer to the option value.</li>
<li><code>optlen</code>: The length of the option value.</li>
</ul>
<h4 id=return-value-26>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_getsockopt>tkl_net_getsockopt</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_getsockopt(const int fd, const TUYA_OPT_LEVEL level, const TUYA_OPT_NAME optname, void *optval, int *optlen);
</code></pre>
<h4 id=function-27>Function</h4>
<p>Gets the socket option value.</p>
<h4 id=parameters-27>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>level</code>: The level at which the option is defined.</li>
<li><code>optname</code>: The option name.</li>
<li><code>optval</code>: A pointer to where the option value will be stored.</li>
<li><code>optlen</code>: A pointer to where the length of the option value will be stored.</li>
</ul>
<h4 id=return-value-27>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_timeout>tkl_net_set_timeout</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_timeout(const int fd, const int ms_timeout, const TUYA_TRANS_TYPE_E type);
</code></pre>
<h4 id=function-28>Function</h4>
<p>Sets the socket timeout option.</p>
<h4 id=parameters-28>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>ms_timeout</code>: Timeout period in milliseconds.</li>
<li><code>type</code>: Type of transmission, either receiving or sending.</li>
</ul>
<h4 id=return-value-28>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_bufsize>tkl_net_set_bufsize</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_bufsize(const int fd, const int buf_size, const TUYA_TRANS_TYPE_E type);
</code></pre>
<h4 id=function-29>Function</h4>
<p>Sets the socket buffer size option.</p>
<h4 id=parameters-29>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>buf_size</code>: Buffer size in bytes.</li>
<li><code>type</code>: Type of transmission, either receiving or sending.</li>
</ul>
<h4 id=return-value-29>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_reuse>tkl_net_set_reuse</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_reuse(const int fd);
</code></pre>
<h4 id=function-30>Function</h4>
<p>Enables the socket reuse option.</p>
<h4 id=parameters-30>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
</ul>
<h4 id=return-value-30>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_disable_nagle>tkl_net_disable_nagle</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_disable_nagle(const int fd);
</code></pre>
<h4 id=function-31>Function</h4>
<p>Disables the Nagle algorithm for the socket.</p>
<h4 id=parameters-31>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
</ul>
<h4 id=return-value-31>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_broadcast>tkl_net_set_broadcast</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_broadcast(const int fd);
</code></pre>
<h4 id=function-32>Function</h4>
<p>Enables the socket broadcast option.</p>
<h4 id=parameters-32>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
</ul>
<h4 id=return-value-32>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_set_keepalive>tkl_net_set_keepalive</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_set_keepalive(int fd, const BOOL_T alive, const uint32_t idle, const uint32_t intr, const uint32_t cnt);
</code></pre>
<h4 id=function-33>Function</h4>
<p>Sets the <code>keepalive</code> option for the socket to monitor the connection.</p>
<h4 id=parameters-33>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>alive</code>: <code>keepalive</code> option, enable or disable.</li>
<li><code>idle</code>: <code>keep idle</code> option, idle time (seconds); if there is no data exchange in this time, the probe starts.</li>
<li><code>intr</code>: <code>keep interval</code> option, probe interval.</li>
<li><code>cnt</code>: <code>keep count</code> option, number of probes.</li>
</ul>
<h4 id=return-value-33>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_getsockname>tkl_net_getsockname</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_getsockname(int fd, TUYA_IP_ADDR_T *addr, uint16_t *port);
</code></pre>
<h4 id=function-34>Function</h4>
<p>Gets information about a specific socket.</p>
<h4 id=parameters-34>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>addr</code>: Source IP address.</li>
<li><code>port</code>: Source port.</li>
</ul>
<h4 id=return-value-34>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_getpeername>tkl_net_getpeername</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_getpeername(int fd, TUYA_IP_ADDR_T *addr, uint16_t *port);
</code></pre>
<h4 id=function-35>Function</h4>
<p>Gets the destination information of a specific socket.</p>
<h4 id=parameters-35>Parameters</h4>
<ul>
<li><code>fd</code>: File descriptor.</li>
<li><code>addr</code>: Destination IP address.</li>
<li><code>port</code>: Destination port.</li>
</ul>
<h4 id=return-value-35>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</p>
<h3 id=tkl_net_sethostname>tkl_net_sethostname</h3>
<pre><code class=language-c>OPERATE_RET tkl_net_sethostname(const char *hostname);
</code></pre>
<h4 id=function-36>Function</h4>
<p>Sets the system hostname, which will be displayed on the router.</p>
<h4 id=parameters-36>Parameters</h4>
<ul>
<li><code>hostname</code>: Hostname.</li>
</ul>
<h4 id=return-value-36>Return Value</h4>
<p>Returns <code>OPRT_OK</code> on success, otherwise refer to error codes in <code>tuya_error_code.h</code>.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/Tuya-Community/TuyaOpen.io/edit/master/docs/tkl-api/tkl_network.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/tkl-api/tkl_lwip><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>tkl_lwip | lwIP Network Stack</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/tkl-api/tkl_wired><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>tkl_wired | Wired Ethernet Driver</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#api-description class="table-of-contents__link toc-highlight">API Description</a><ul><li><a href=#tkl_net_get_errno class="table-of-contents__link toc-highlight">tkl_net_get_errno</a><li><a href=#tkl_net_fd_set class="table-of-contents__link toc-highlight">tkl_net_fd_set</a><li><a href=#tkl_net_fd_clear class="table-of-contents__link toc-highlight">tkl_net_fd_clear</a><li><a href=#tkl_net_fd_isset class="table-of-contents__link toc-highlight">tkl_net_fd_isset</a><li><a href=#tkl_net_fd_zero class="table-of-contents__link toc-highlight">tkl_net_fd_zero</a><li><a href=#tkl_net_select class="table-of-contents__link toc-highlight">tkl_net_select</a><li><a href=#tkl_net_get_nonblock class="table-of-contents__link toc-highlight">tkl_net_get_nonblock</a><li><a href=#tkl_net_set_block class="table-of-contents__link toc-highlight">tkl_net_set_block</a><li><a href=#tkl_net_close class="table-of-contents__link toc-highlight">tkl_net_close</a><li><a href=#tkl_net_shutdown class="table-of-contents__link toc-highlight">tkl_net_shutdown</a><li><a href=#tkl_net_socket_create class="table-of-contents__link toc-highlight">tkl_net_socket_create</a><li><a href=#tkl_net_connect class="table-of-contents__link toc-highlight">tkl_net_connect</a><li><a href=#tkl_net_connect_raw class="table-of-contents__link toc-highlight">tkl_net_connect_raw</a><li><a href=#tkl_net_bind class="table-of-contents__link toc-highlight">tkl_net_bind</a><li><a href=#tkl_net_listen class="table-of-contents__link toc-highlight">tkl_net_listen</a><li><a href=#tkl_net_accept class="table-of-contents__link toc-highlight">tkl_net_accept</a><li><a href=#tkl_net_send class="table-of-contents__link toc-highlight">tkl_net_send</a><li><a href=#tkl_net_send_to class="table-of-contents__link toc-highlight">tkl_net_send_to</a><li><a href=#tkl_net_recv class="table-of-contents__link toc-highlight">tkl_net_recv</a><li><a href=#tkl_net_recv_nd_size class="table-of-contents__link toc-highlight">tkl_net_recv_nd_size</a><li><a href=#tkl_net_recvfrom class="table-of-contents__link toc-highlight">tkl_net_recvfrom</a><li><a href=#tkl_net_gethostbyname class="table-of-contents__link toc-highlight">tkl_net_gethostbyname</a><li><a href=#tkl_net_socket_bind class="table-of-contents__link toc-highlight">tkl_net_socket_bind</a><li><a href=#tkl_net_set_cloexec class="table-of-contents__link toc-highlight">tkl_net_set_cloexec</a><li><a href=#tkl_net_get_socket_ip class="table-of-contents__link toc-highlight">tkl_net_get_socket_ip</a><li><a href=#tkl_net_str2addr class="table-of-contents__link toc-highlight">tkl_net_str2addr</a><li><a href=#tkl_net_setsockopt class="table-of-contents__link toc-highlight">tkl_net_setsockopt</a><li><a href=#tkl_net_getsockopt class="table-of-contents__link toc-highlight">tkl_net_getsockopt</a><li><a href=#tkl_net_set_timeout class="table-of-contents__link toc-highlight">tkl_net_set_timeout</a><li><a href=#tkl_net_set_bufsize class="table-of-contents__link toc-highlight">tkl_net_set_bufsize</a><li><a href=#tkl_net_set_reuse class="table-of-contents__link toc-highlight">tkl_net_set_reuse</a><li><a href=#tkl_net_disable_nagle class="table-of-contents__link toc-highlight">tkl_net_disable_nagle</a><li><a href=#tkl_net_set_broadcast class="table-of-contents__link toc-highlight">tkl_net_set_broadcast</a><li><a href=#tkl_net_set_keepalive class="table-of-contents__link toc-highlight">tkl_net_set_keepalive</a><li><a href=#tkl_net_getsockname class="table-of-contents__link toc-highlight">tkl_net_getsockname</a><li><a href=#tkl_net_getpeername class="table-of-contents__link toc-highlight">tkl_net_getpeername</a><li><a href=#tkl_net_sethostname class="table-of-contents__link toc-highlight">tkl_net_sethostname</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/quick-start/unboxing>Tutorial</a><li class=footer__item><a class=footer__link-item href=/pricing>Service</a><li class=footer__item><a class=footer__link-item href=/docs/hardware-specific>Hardware List</a><li class=footer__item><a class=footer__link-item href=/docs/hardware-specific/t5-ai-board/overview-t5-ai-board>Tuya T5AI Dev Kit</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Tools</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=footer__link-item>Web Serial Tool<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.com/invite/yPPShSTttG target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/tuyasmart target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@tuya2023 target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/tuya-smart target=_blank rel="noopener noreferrer" class=footer__link-item>Linkedin<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gitee.com/tuya-open/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>Gitee(Mirror)<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Acknowledgements</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://storyset.com/technology target=_blank rel="noopener noreferrer" class=footer__link-item>Thanks for the technology illustrations by Storyset<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>
        <p style="font-weight: 500;">Copyright © TuyaOpen Authors 2025 | Documentation Distributed under Apache License Version 2.0</p>
      </div></div></div></footer></div></body>