"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["2490"],{3375:function(n,e,l){l.r(e),l.d(e,{metadata:()=>c,default:()=>h,frontMatter:()=>s,contentTitle:()=>t,toc:()=>_,assets:()=>r});var c=JSON.parse('{"id":"tkl-api/tkl_dac","title":"tkl_dac | DAC \u9A71\u52A8","description":"\u7B80\u8981\u8BF4\u660E","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/tkl-api/tkl_dac.md","sourceDirName":"tkl-api","slug":"/tkl-api/tkl_dac","permalink":"/zh/docs/tkl-api/tkl_dac","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/i18n/zh/docusaurus-plugin-content-docs/current/tkl-api/tkl_dac.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"tkl_adc | ADC \u9A71\u52A8","permalink":"/zh/docs/tkl-api/tkl_adc"},"next":{"title":"tkl_flash | Flash \u9A71\u52A8","permalink":"/zh/docs/tkl-api/tkl_flash"}}'),d=l(4848),i=l(8453);let s={},t="tkl_dac | DAC \u9A71\u52A8",r={},_=[{value:"\u7B80\u8981\u8BF4\u660E",id:"\u7B80\u8981\u8BF4\u660E",level:2},{value:"API \u63CF\u8FF0",id:"api-\u63CF\u8FF0",level:2},{value:"tkl_dac_init",id:"tkl_dac_init",level:3},{value:"tkl_dac_deinit",id:"tkl_dac_deinit",level:3},{value:"tkl_dac_controller_config",id:"tkl_dac_controller_config",level:3},{value:"tkl_dac_base_cfg_get",id:"tkl_dac_base_cfg_get",level:3},{value:"tkl_dac_start",id:"tkl_dac_start",level:3},{value:"tkl_dac_stop",id:"tkl_dac_stop",level:3},{value:"tkl_dac_fifo_reset",id:"tkl_dac_fifo_reset",level:3},{value:"1.dac\u793A\u4F8B\u4E00",id:"1dac\u793A\u4F8B\u4E00",level:2}];function a(n){let e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.header,{children:(0,d.jsx)(e.h1,{id:"tkl_dac--dac-\u9A71\u52A8",children:"tkl_dac | DAC \u9A71\u52A8"})}),"\n",(0,d.jsx)(e.h2,{id:"\u7B80\u8981\u8BF4\u660E",children:"\u7B80\u8981\u8BF4\u660E"}),"\n",(0,d.jsx)(e.p,{children:"DAC\uFF08Digital to analog converter\uFF09\u5373\u6570\u5B57\u6A21\u62DF\u8F6C\u6362\u5668\uFF0C\u5B83\u53EF\u4EE5\u5C06\u6570\u5B57\u4FE1\u53F7\u8F6C\u6362\u4E3A\u6A21\u62DF\u4FE1\u53F7\u3002\u5B83\u7684\u529F\u80FD\u4E0E ADC \u76F8\u53CD\u3002"}),"\n",(0,d.jsx)(e.p,{children:"\u5728\u5E38\u89C1\u7684\u6570\u5B57\u4FE1\u53F7\u7CFB\u7EDF\u4E2D\uFF0C\u5927\u90E8\u5206\u4F20\u611F\u5668\u4FE1\u53F7\u88AB\u8F6C\u5316\u6210\u7535\u538B\u4FE1\u53F7\uFF0C\u800C ADC \u628A\u7535\u538B\u6A21\u62DF\u4FE1\u53F7\u8F6C\u6362\u6210\u6613\u4E8E\u8BA1\u7B97\u673A\u5B58\u50A8\u3001\u5904\u7406\u7684\u6570\u5B57\u7F16\u7801\uFF0C\u7531\u8BA1\u7B97\u673A\u5904\u7406\u5B8C\u6210\u540E\uFF0C\u518D\u7531 DAC \u8F93\u51FA\u7535\u538B\u6A21\u62DF\u4FE1\u53F7\uFF0C\u8BE5\u7535\u538B\u6A21\u62DF\u4FE1\u53F7\u5E38\u5E38\u7528\u6765\u9A71\u52A8\u67D0\u4E9B\u6267\u884C\u5668\u4EF6\uFF0C\u4F7F\u4EBA\u7C7B\u6613\u4E8E\u611F\u77E5\u3002\u5982\u97F3\u9891\u4FE1\u53F7\u7684\u91C7\u96C6\u53CA\u8FD8\u539F\u5C31\u662F\u8FD9\u6837\u4E00\u4E2A\u8FC7\u7A0B\u3002"}),"\n",(0,d.jsx)(e.h2,{id:"api-\u63CF\u8FF0",children:"API \u63CF\u8FF0"}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_init",children:"tkl_dac_init"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET tkl_dac_init(TUYA_DAC_NUM_E port_num);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u901A\u8FC7\u7AEF\u53E3\u53F7\u521D\u59CB\u5316\u5BF9\u5E94\u7684 dac \u5B9E\u4F8B\uFF0C\u8FD4\u56DE\u521D\u59CB\u5316\u7ED3\u679C\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u6570:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"port_num: \u7AEF\u53E3\u53F7"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_deinit",children:"tkl_dac_deinit"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET tkl_dac_deinit(TUYA_DAC_NUM_E port_num);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"dac \u5B9E\u4F8B\u53CD\u521D\u59CB\u5316\u3002\u8BE5\u63A5\u53E3\u4F1A\u505C\u6B62 dac\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u6570:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"port_num: \u7AEF\u53E3\u53F7\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_controller_config",children:"tkl_dac_controller_config"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET tkl_dac_controller_config(TUYA_DAC_NUM_E port_num, TUYA_DAC_CMD_E cmd, void * argu);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u529F\u80FD\u63CF\u8FF0:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u914D\u7F6E\u76F8\u5E94\u7684dac\u8BBE\u5907\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u53C2\u6570:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"port_num: \u7AEF\u53E3\u53F7\u3002"}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"cmd: \u547D\u4EE4\u5B57"}),"\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.strong,{children:"TUYA_DAC_CMD_E"}),"\uFF1A"]}),"\n",(0,d.jsxs)(e.table,{children:[(0,d.jsx)(e.thead,{children:(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.th,{children:"\u540D\u5B57"}),(0,d.jsx)(e.th,{children:"\u542B\u4E49"})]})}),(0,d.jsxs)(e.tbody,{children:[(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"TUYA_DAC_WRITE_FIFO"}),(0,d.jsx)(e.td,{children:"\u8BBE\u7F6E DAC \u7684 fifo \u6570\u636E"})]}),(0,d.jsxs)(e.tr,{children:[(0,d.jsx)(e.td,{children:"TUYA_DAC_SET_BASE_CFG"}),(0,d.jsx)(e.td,{children:"\u8BBE\u7F6E DAC \u7684\u57FA\u672C\u914D\u7F6E"})]})]})]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"argu\uFF1A\u53C2\u6570 \u53EF\u4E3A\u4E0B\u9762\u7684\u4E24\u4E2A\u7ED3\u6784\u4F53"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"typedef struct{\n	uint8_t *data;       //data\n	uint32_t len;        // data length\n}TUYA_DAC_DATA_T;\n"})}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"typedef struct {\n    TUYA_AD_DA_CH_LIST_U  ch_list;       // dac channel list\n    uint8_t  ch_nums;       // dac channel number\n    uint8_t  width;         // output width\n    uint32_t freq;          // convert freq\n} TUYA_DAC_BASE_CFG_T;\n"})}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u8FD4\u56DE\u503C:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_base_cfg_get",children:"tkl_dac_base_cfg_get"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET  tkl_dac_base_cfg_get (TUYA_DAC_NUM_E port_num,TUYA_DAC_BASE_CFG_T *cfg);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u529F\u80FD\u63CF\u8FF0:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u83B7\u53D6\u76F8\u5E94 DAC \u7684\u57FA\u672C\u914D\u7F6E"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u53C2\u6570:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.code,{children:"port_num"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsxs)(e.p,{children:[(0,d.jsx)(e.code,{children:"cfg"}),"\uFF1Adac\u57FA\u672C\u914D\u7F6E\u7ED3\u6784\u4F53"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"typedef struct {\n    TUYA_AD_DA_CH_LIST_U  ch_list;       // dac channel list\n    uint8_t  ch_nums;       // dac channel number\n    uint8_t  width;         // output width\n    uint32_t freq;          // convert freq\n} TUYA_DAC_BASE_CFG_T;\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\n",(0,d.jsx)(e.p,{children:"\u8FD4\u56DE\u503C:"}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_start",children:"tkl_dac_start"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET tkl_dac_start(TUYA_DAC_NUM_E port_num);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u542F\u52A8\u76F8\u5E94\u7684DAC \u5F00\u59CB\u8F6C\u6362"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u6570:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"port_num"}),": \u7AEF\u53E3\u53F7"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_stop",children:"tkl_dac_stop"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET tkl_dac_stop(TUYA_DAC_NUM_E port_num);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u505C\u6B62\u76F8\u5E94\u7684DAC"}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u6570:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"port_num"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h3,{id:"tkl_dac_fifo_reset",children:"tkl_dac_fifo_reset"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"OPERATE_RET  tkl_dac_fifo_reset (TUYA_DAC_NUM_E port_num);\n"})}),"\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsx)(e.li,{children:"\u529F\u80FD\u63CF\u8FF0:\u76F8\u5E94\u7684 DAC \u7684 FIFO \u91CD\u7F6E"}),"\n",(0,d.jsxs)(e.li,{children:["\u53C2\u6570:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:[(0,d.jsx)(e.code,{children:"port_num"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(e.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,d.jsxs)(e.ul,{children:["\n",(0,d.jsxs)(e.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,d.jsx)(e.code,{children:"tuya_error_code.h"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(e.h1,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,d.jsx)(e.h2,{id:"1dac\u793A\u4F8B\u4E00",children:"1.dac\u793A\u4F8B\u4E00"}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-c",children:"/*\u521D\u59CB\u5316\u7B2C0\u4E2Adac\u5916\u8BBE*/\ntkl_dac_init(0);\n\n/*\u914D\u7F6E\u7B2C0\u4E2ADAC\u7684\u57FA\u672C\u914D\u7F6E*/\nTUYA_DAC_BASE_CFG_T dac_base_cfg;\n\ndac_base_cfg.freq = 8000;  /*DAC\u7684\u8F6C\u6362\u901F\u5EA6\u4E3A1\u79D28000\u6B21*/\ndac_base_cfg.width = 16;   /*DAC\u7684\u7CBE\u5EA6\u4E3A16*/\ndac_base_cfg.ch_nums = 1;  /*dac\u4E3A\u5355\u901A\u9053\u8F93\u51FA  \u7AEF\u53E3\u53F7\u4E3A2\uFF08chs_cfg = 2\uFF09*/\ndac_base_cfg.ch_list.bits.ch_2 = 1;\n\ntkl_dac_controller_config(0,TUYA_DAC_SET_BASE_CFG, &dac_base_cfg);\n\n/*\u5199DAC\u7684FIFO*/\nTUYA_DAC_DATA_T data_fifo;\nuint8_t dac_data[1024];\n\ndata_fifo.len = sizeof(dac_data);\ndata_fifo.data = dac_data;\ntkl_dac_controller_config(0,TUYA_DAC_WRITE_FIFO, &data_fifo);\n\n/*\u542F\u52A8\u7B2C0\u4E2Adac\u5F00\u59CB\u8F6C\u6362*/\ntkl_dac_start(0);\n\n/*\u6301\u7EED\u7684\u5F80DAC\u7684FIFO \u5199\u6570\u636E \u8BA9DAC\u8F6C\u6362*/\nwhile(1)\n{\n    data_fifo.len = sizeof(dac_data);\n	data_fifo.data = dac_data;\n	tkl_dac_controller_config(0,TUYA_DAC_WRITE_FIFO, &data_fifo);\n}\n\n/*\u505C\u6B62\u7B2C0\u4E2Adac\u5F00\u59CB\u8F6C\u6362*/\ntkl_dac_stop(0);\n\n/*deinit \u7B2C0\u4E2ADAC*/\ntkl_dac_deinit(0);\n"})})]})}function h(n={}){let{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,d.jsx)(e,{...n,children:(0,d.jsx)(a,{...n})}):a(n)}},8453:function(n,e,l){l.d(e,{R:()=>s,x:()=>t});var c=l(6540);let d={},i=c.createContext(d);function s(n){let e=c.useContext(i);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(d):n.components||d:s(n.components),c.createElement(i.Provider,{value:e},n.children)}}}]);