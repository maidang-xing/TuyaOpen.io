"use strict";(self.webpackChunktuyaopen_io_website=self.webpackChunktuyaopen_io_website||[]).push([["4662"],{9415:function(e,n,l){l.r(n),l.d(n,{metadata:()=>i,default:()=>h,frontMatter:()=>d,contentTitle:()=>c,toc:()=>_,assets:()=>r});var i=JSON.parse('{"id":"tkl-api/tkl_i2c","title":"tKl_i2c | I2C \u9A71\u52A8","description":"\u7B80\u8981\u8BF4\u660E","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/tkl-api/tkl_i2c.md","sourceDirName":"tkl-api","slug":"/tkl-api/tkl_i2c","permalink":"/zh/docs/tkl-api/tkl_i2c","draft":false,"unlisted":false,"editUrl":"https://github.com/Tuya-Community/TuyaOpen.io/edit/master/i18n/zh/docusaurus-plugin-content-docs/current/tkl-api/tkl_i2c.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"tkl_gipo | GPIO \u9A71\u52A8","permalink":"/zh/docs/tkl-api/tkl_gpio"},"next":{"title":"tlk_i2s | I2S \u9A71\u52A8","permalink":"/zh/docs/tkl-api/tkl_i2s"}}'),t=l(4848),s=l(8453);let d={},c="tKl_i2c | I2C \u9A71\u52A8",r={},_=[{value:"\u7B80\u8981\u8BF4\u660E",id:"\u7B80\u8981\u8BF4\u660E",level:2},{value:"\u7D22\u5F15",id:"\u7D22\u5F15",level:2},{value:"tkl_i2c_init",id:"tkl_i2c_init",level:3},{value:"TUYA_IIC_ROLE_E:",id:"tuya_iic_role_e",level:4},{value:"TUYA_IIC_SPEED_E\uFF1A",id:"tuya_iic_speed_e",level:4},{value:"TUYA_IIC_ADDR_MODE_E\uFF1A",id:"tuya_iic_addr_mode_e",level:4},{value:"tkl_i2c_deinit",id:"tkl_i2c_deinit",level:3},{value:"tkl_i2c_irq_init",id:"tkl_i2c_irq_init",level:3},{value:"tkl_i2c_irq_enable",id:"tkl_i2c_irq_enable",level:3},{value:"tkl_i2c_irq_disable",id:"tkl_i2c_irq_disable",level:3},{value:"tkl_i2c_master_send",id:"tkl_i2c_master_send",level:3},{value:"tkl_i2c_master_receive",id:"tkl_i2c_master_receive",level:3},{value:"tkl_i2c_set_slave_addr",id:"tkl_i2c_set_slave_addr",level:3},{value:"tkl_i2c_slave_send",id:"tkl_i2c_slave_send",level:3},{value:"tkl_i2c_slave_receive",id:"tkl_i2c_slave_receive",level:3},{value:"tkl_i2c_get_status",id:"tkl_i2c_get_status",level:3},{value:"tkl_i2c_get_data_count",id:"tkl_i2c_get_data_count",level:3},{value:"TUYA_IIC_STATUS_T:",id:"tuya_iic_status_t",level:4},{value:"tkl_i2c_reset",id:"tkl_i2c_reset",level:3},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:2},{value:"1.I2C \u793A\u4F8B\u4E00",id:"1i2c-\u793A\u4F8B\u4E00",level:2},{value:"1.I2C \u793A\u4F8B\u4E8C",id:"1i2c-\u793A\u4F8B\u4E8C",level:2}];function x(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"tkl_i2c--i2c-\u9A71\u52A8",children:"tKl_i2c | I2C \u9A71\u52A8"})}),"\n",(0,t.jsx)(n.h2,{id:"\u7B80\u8981\u8BF4\u660E",children:"\u7B80\u8981\u8BF4\u660E"}),"\n",(0,t.jsx)(n.p,{children:"I2C (Inter-Integrated Circuit) \u662F\u4E00\u79CD\u4E32\u884C\u7684\u540C\u6B65\u901A\u4FE1\u603B\u7EBF\u3002 I2C \u4E32\u884C\u603B\u7EBF\u6709\u4E24\u6839\u4FE1\u53F7\u7EBF\uFF0C\u4E00\u6839\u662F\u53CC\u5411\u7684\u6570\u636E\u7EBF SDA\uFF0C\u53E6\u4E00\u6839\u662F\u65F6\u949F\u7EBF SCL\u3002\u6240\u6709\u63A5\u5230 I2C \u603B\u7EBF\u8BBE\u5907\u4E0A\u7684\u4E32\u884C\u6570\u636E SDA \u90FD\u63A5\u5230\u603B\u7EBF\u7684 SDA \u4E0A\uFF0C\u5404\u8BBE\u5907\u7684\u65F6\u949F\u7EBF SCL \u63A5\u5230\u603B\u7EBF\u7684 SCL \u4E0A\u3002"}),"\n",(0,t.jsx)(n.p,{children:"I2C \u5178\u578B\u63A5\u7EBF\u65B9\u5F0F\u5982\u4E0B:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://images.tuyacn.com/fe-static/docs/img/fd7da59e-749b-4a3a-b171-411459568eed.png",alt:"image-20220406143504112"})}),"\n",(0,t.jsx)(n.p,{children:"\u603B\u7EBF\u7684\u901A\u4FE1\u7531\u4E3B\u673A\u63A7\u5236\uFF0C\u5373\u4E3B\u673A\u662F\u6570\u636E\u7684\u4F20\u9001\uFF08\u53D1\u51FA\u542F\u52A8\u4FE1\u53F7\uFF09\u3001\u53D1\u51FA\u65F6\u949F\u4FE1\u53F7\u4EE5\u53CA\u4F20\u9001\u7ED3\u675F\u65F6\u53D1\u51FA\u505C\u6B62\u4FE1\u53F7\u7684\u8BBE\u5907\u3002\u88AB\u4E3B\u673A\u5BFB\u8BBF\u7684\u8BBE\u5907\u79F0\u4E3A\u4ECE\u673A\u3002\u6BCF\u4E2A\u63A5\u5230 I2C \u603B\u7EBF\u7684\u8BBE\u5907\u90FD\u6709\u4E00\u4E2A\u552F\u4E00\u7684\u5730\u5740\uFF0C\u4EE5\u4FBF\u4E8E\u4E3B\u673A\u5BFB\u8BBF\u3002\u4E3B\u673A\u548C\u4ECE\u673A\u7684\u6570\u636E\u4F20\u9001\uFF0C\u53EF\u4EE5\u7531\u4E3B\u673A\u53D1\u9001\u6570\u636E\u5230\u4ECE\u673A\uFF0C\u4E5F\u53EF\u4EE5\u7531\u4ECE\u673A\u53D1\u5230\u4E3B\u673A\u3002I2C \u652F\u6301 7 \u4F4D\u6216\u8005 10 \u4F4D\u4ECE\u8BBE\u5907\u5730\u5740\u6A21\u5F0F\u3002I2C \u603B\u7EBF\u5728\u5F00\u59CB\u6761\u4EF6\u540E\u7684\u9996\u5B57\u8282\u51B3\u5B9A\u54EA\u4E2A\u88AB\u63A7\u5668\u5C06\u88AB\u4E3B\u63A7\u5668\u9009\u62E9\uFF0C\u5F53\u4E3B\u673A\u8F93\u51FA\u4E00\u5730\u5740\u65F6\uFF0C\u7CFB\u7EDF\u4E2D\u7684\u6BCF\u4E00\u4ECE\u8BBE\u5907\u90FD\u5C06\u5F00\u59CB\u6761\u4EF6\u540E\u7684\u5730\u5740\u548C\u81EA\u5DF1\u7684\u5730\u5740\u8FDB\u884C\u6BD4\u8F83\uFF0C\u5982\u679C\u76F8\u540C\uFF0C\u8BE5\u4ECE\u673A\u5373\u8BA4\u4E3A\u81EA\u5DF1\u88AB\u4E3B\u673A\u5BFB\u5740\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u7D22\u5F15",children:"\u7D22\u5F15"}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_init",children:"tkl_i2c_init"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_init(TUYA_I2C_NUM_E port, const TUYA_IIC_BASE_CFG_T *cfg);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u529F\u80FD\u63CF\u8FF0:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u901A\u8FC7\u7AEF\u53E3\u53F7\u548C\u57FA\u7840\u914D\u7F6E\u521D\u59CB\u5316\u5BF9\u5E94\u7684 I2C \u5B9E\u4F8B\uFF0C\u8FD4\u56DE\u521D\u59CB\u5316\u7ED3\u679C\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u53C2\u6570:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"cfg"}),": I2C \u57FA\u7840\u914D\u7F6E\uFF0C\u5305\u542B\u89D2\u8272\uFF0C\u901F\u7387\uFF0C\u5730\u5740\u5BBD\u5EA6 \u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"typedef struct {\n    TUYA_IIC_ROLE_E      role;\n    TUYA_IIC_SPEED_E     speed;\n    TUYA_IIC_ADDR_MODE_E addr_width;\n} TUYA_IIC_BASE_CFG_T;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"tuya_iic_role_e",children:"TUYA_IIC_ROLE_E:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u540D\u5B57"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B9A\u4E49"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5907\u6CE8"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_MODE_MASTER"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u4E3B\u673A\u6A21\u5F0F"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_MODE_MASTER"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u4ECE\u673A\u6A21\u5F0F"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"tuya_iic_speed_e",children:"TUYA_IIC_SPEED_E\uFF1A"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u540D\u5B57"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B9A\u4E49"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5907\u6CE8"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_BUS_SPEED_100K"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u6807\u51C6\u901F\u5EA6(100KHz)"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_BUS_SPEED_400K"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u5FEB\u901F\u901F\u5EA6(400KHz)"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_BUS_SPEED_1M"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u6807\u51C6+\u901F\u5EA6(1MHz)"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_BUS_SPEED_3_4M"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"I2C \u9AD8\u901F\u901F\u5EA6(3.4MHz)"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"tuya_iic_addr_mode_e",children:"TUYA_IIC_ADDR_MODE_E\uFF1A"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u540D\u5B57"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B9A\u4E49"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5907\u6CE8"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_ADDRESS_7BIT"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"7bit \u5730\u5740\u6A21\u5F0F"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_ADDRESS_10BIT"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"10bit \u5730\u5740\u6A21\u5F0F"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u8FD4\u56DE\u503C:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_deinit",children:"tkl_i2c_deinit"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_deinit(TUYA_I2C_NUM_E port)\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"I2C \u5B9E\u4F8B\u53CD\u521D\u59CB\u5316\u3002\u8BE5\u63A5\u53E3\u4F1A\u505C\u6B62 I2C\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u5B9E\u4F8B\u6B63\u5728\u8FDB\u884C\u7684\u4F20\u8F93\uFF08\u5982\u679C\u6709\uFF09\uFF0C\u5E76\u4E14\u91CA\u653E\u76F8\u5173\u7684\u8F6F\u786C\u4EF6\u8D44\u6E90\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_irq_init",children:"tkl_i2c_irq_init"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_irq_init(TUYA_I2C_NUM_E port, TUYA_I2C_IRQ_CB cb);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u529F\u80FD\u63CF\u8FF0:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"I2C \u4E2D\u65AD\u521D\u59CB\u5316\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u53C2\u6570:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"cb"}),": I2C \u4E2D\u65AD\u56DE\u8C03\u51FD\u6570\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u56DE\u8C03\u51FD\u6570\u7C7B\u578B TUYA_I2C_IRQ_CB \u5B9A\u4E49\u5982\u4E0B\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"typedef void (*TUYA_I2C_IRQ_CB)(TUYA_I2C_NUM_E port, TUYA_I2C_IRQ_EVT_E event);\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5176\u4E2D port \u4E3A\u7AEF\u53E3\u53F7\uFF0Cevent \u4E3A\u4F20\u7ED9\u56DE\u8C03\u51FD\u6570\u7684\u4E8B\u4EF6\u7C7B\u578B\u3002"}),"\n",(0,t.jsx)(n.p,{children:"I2C \u56DE\u8C03\u4E8B\u4EF6\u679A\u4E3E\u7C7B\u578B TUYA_I2C_IRQ_EVT_E \u5B9A\u4E49\u5982\u4E0B\uFF1A"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u540D\u5B57"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B9A\u4E49"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5907\u6CE8"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_TRANSFER_DONE"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4F20\u8F93\u5B8C\u6210\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_TRANSFER_INCOMPLETE"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4F20\u8F93\u672A\u5B8C\u6210\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_SLAVE_TRANSMIT"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ECE\u8BBE\u5907\u53D1\u9001\u64CD\u4F5C\u8BF7\u6C42\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_SLAVE_RECEIVE"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ECE\u8BBE\u5907\u63A5\u6536\u64CD\u4F5C\u8BF7\u6C42\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_ADDRESS_NACK"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u5730\u5740\u672A\u5E94\u7B54\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_GENERAL_CALL"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u6307\u793A\u6536\u5230 general call\uFF08\u5730\u5740\u4E3A0\uFF09\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_ARBITRATION_LOST"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E3B\u673A\u4EF2\u88C1\u4E22\u5931\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_BUS_ERROR"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u603B\u7EBF\u9519\u8BEF\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"TUYA_IIC_EVENT_BUS_CLEAR"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u603B\u7EBF\u6E05\u9664\u5B8C\u6210\u4E8B\u4EF6"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u8FD4\u56DE\u503C:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_irq_enable",children:"tkl_i2c_irq_enable"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_irq_enable(TUYA_I2C_NUM_E port);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6253\u5F00 I2C \u4E2D\u65AD\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_irq_disable",children:"tkl_i2c_irq_disable"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_irq_disable(TUYA_I2C_NUM_E port);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5173\u95ED I2C \u4E2D\u65AD\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["OPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_master_send",children:"tkl_i2c_master_send"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_master_send(TUYA_I2C_NUM_E port, uint16_t dev_addr, const void *data, uint32_t size, BOOL_T xfer_pending);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"I2C \u4F5C\u4E3A\u4E3B\u673A\u65F6\u542F\u52A8\u6570\u636E\u53D1\u9001\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dev_addr"}),": Slave \u8BBE\u5907\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"}),": \u5F85\u53D1\u9001\u6570\u636E\u7684\u7F13\u51B2\u533A\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"size"}),": \u5F85\u53D1\u9001\u6570\u636E\u7684\u957F\u5EA6\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"xfer_pending"}),":"]}),"\n",(0,t.jsx)(n.li,{children:"\u53D1\u9001\u5B8C\u6210\u540E\u662F\u5426\u53D1\u9001\u505C\u6B62\u4F4D\u30021-\u4E0D\u53D1\u9001\u505C\u6B62\u4F4D\uFF0C0-\u53D1\u9001\u505C\u6B62\u4F4D\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_master_receive",children:"tkl_i2c_master_receive"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_master_receive(TUYA_I2C_NUM_E port, uint16_t dev_addr, void *data, uint32_t size, BOOL_T xfer_pending);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u529F\u80FD\u63CF\u8FF0:"}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dev_addr"}),": Slave \u8BBE\u5907\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"}),": \u5F85\u63A5\u6536\u6570\u636E\u7684\u7F13\u51B2\u533A\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"size"}),": \u5F85\u63A5\u6536\u6570\u636E\u7684\u957F\u5EA6\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"xfer_pending"}),":"]}),"\n",(0,t.jsx)(n.li,{children:"\u63A5\u6536\u5B8C\u6210\u540E\u662F\u5426\u53D1\u9001\u505C\u6B62\u4F4D\u30021-\u4E0D\u53D1\u9001\u505C\u6B62\u4F4D\uFF0C0-\u53D1\u9001\u505C\u6B62\u4F4D\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_set_slave_addr",children:"tkl_i2c_set_slave_addr"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_set_slave_addr(TUYA_I2C_NUM_E port, uint16_t dev_addr);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u914D\u7F6E I2C \u7684\u4ECE\u8BBE\u5907\u5730\u5740\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"dev_addr"}),": I2C \u4ECE\u8BBE\u5907\u901A\u4FE1\u5730\u5740\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_slave_send",children:"tkl_i2c_slave_send"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_slave_send(TUYA_I2C_NUM_E port, const void *data, uint32_t size);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"i2c\u4F5C\u4E3A\u4ECE\u673A\u65F6\u542F\u52A8\u6570\u636E\u53D1\u9001\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"}),": \u5F85\u53D1\u9001\u6570\u636E\u7684\u7F13\u51B2\u533A\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"size"}),": \u4ECE\u673A\u5F85\u53D1\u9001\u6570\u636E\u7684\u957F\u5EA6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_slave_receive",children:"tkl_i2c_slave_receive"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_slave_receive(TUYA_I2C_NUM_E port, void *data, uint32_t size);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"i2c\u4F5C\u4E3A\u4ECE\u673A\u65F6\u542F\u52A8\u6570\u636E\u63A5\u6536\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"data"}),": \u5F85\u63A5\u6536\u6570\u636E\u7684\u7F13\u51B2\u533A\u5730\u5740\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"size"}),": \u5F85\u63A5\u6536\u6570\u636E\u7684\u957F\u5EA6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_get_status",children:"tkl_i2c_get_status"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"TUYA_IIC_STATUS_T tkl_i2c_get_status(TUYA_I2C_NUM_E port);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u83B7\u53D6\u5F53\u524D\u65F6\u523Bi2c \u7684\u72B6\u6001\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"I2C \u72B6\u6001\u7684\u7ED3\u6784\u4F53\u3002I2C \u7684\u72B6\u6001\u5B9A\u4E49\u89C1 TUYA_I2C_STATUS_T"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_get_data_count",children:"tkl_i2c_get_data_count"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"int32_t tkl_i2c_get_data_count(TUYA_I2C_NUM_E port);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u83B7\u53D6 I2C \u5DF2\u4F20\u8F93\u5F97\u6570\u636E\u4E2A\u6570\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u9488\u5BF9 tkl_i2c_master_send\uFF0C\u4F20\u8F93\u6216\u53D1\u9001\u7684\u5B57\u8282\u6570\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u9488\u5BF9 tkl_i2c_master_receive\uFF0C\u63A5\u6536\u5230\u7684\u5B57\u8282\u6570\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u9488\u5BF9 tkl_i2c_slave_send\uFF0C\u4F20\u8F93\u7684\u5B57\u8282\u6570\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u9488\u5BF9 tkl_i2c_slave_receive\uFF0C\u63A5\u6536\u7684\u5B57\u8282\u6570\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u5DF2\u4F20\u8F93\u6570\u636E\u4E2A\u6570"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"tuya_iic_status_t",children:"TUYA_IIC_STATUS_T:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u540D\u5B57"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5B9A\u4E49"}),(0,t.jsx)(n.th,{style:{textAlign:"left"},children:"\u5907\u6CE8"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"busy : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4F20\u8F93\u6216\u53D1\u9001\u5FD9\u72B6\u6001\u4F4D"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"mode : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u6A21\u5F0F\u4F4D\u30021-\u4E3B\uFF0C0-\u4ECE"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"direction : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4F20\u8F93\u65B9\u5411\uFF1A1-\u63A5\u6536\uFF0C0-\u53D1\u9001"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"general_call : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"general call \u6307\u793A"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"arbitration_lost : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u4E3B\u673A\u5931\u53BB\u4EF2\u88C1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"bus_error : 1"}),(0,t.jsx)(n.td,{style:{textAlign:"left"},children:"\u603B\u7EBF\u9519\u8BEF"}),(0,t.jsx)(n.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"tkl_i2c_reset",children:"tkl_i2c_reset"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"OPERATE_RET tkl_i2c_reset(TUYA_I2C_NUM_E port);\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u529F\u80FD\u63CF\u8FF0:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u590D\u4F4Di2c\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u53C2\u6570:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u7AEF\u53E3\u53F7\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\u8FD4\u56DE\u503C:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u9519\u8BEF\u7801\uFF0COPRT_OK \u6210\u529F\uFF0C\u5176\u4ED6\u8BF7\u53C2\u8003\u6587\u4EF6 ",(0,t.jsx)(n.code,{children:"tuya_error_code.h"}),"\uFF0C",(0,t.jsx)(n.code,{children:"OS_ADAPTER_I2C"})," \u5B9A\u4E49\u90E8\u5206\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,t.jsx)(n.h2,{id:"1i2c-\u793A\u4F8B\u4E00",children:"1.I2C \u793A\u4F8B\u4E00"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"static uint16_t cb_transfer_flag = 0xff;\n\nstatic void i2c_event_cb_fun(int32_t idx, TUYA_IIC_IRQ_EVT_E event)\n{\n    if (idx == I2C_NUM_0){\n        cb_transfer_flag = event;\n    }\n}\n\nvoid tuya_i2c_master_test(void)\n{\n    OPERATE_RET ret;\n 	TUYA_IIC_BASE_CFG_T cfg;\n    //receive buffer\n    char rcv_buf[10] ;\n    //data to send\n    char send_buf[10] = {0,1,2,3,4,5,6,7,8,9};\n\n    tkl_io_pinmux_config(TUYA_IO_PIN_0, TUYA_IIC0_SCL);\n    tkl_io_pinmux_config(TUYA_IO_PIN_1, TUYA_IIC0_SDA);\n\n    cfg.role = TUYA_IIC_MODE_MASTER;\n    cfg.speed = TUYA_IIC_BUS_SPEED_100K;\n    cfg.addr_width = TUYA_IIC_ADDRESS_7BIT;\n\n    ret = tkl_i2c_init(I2C_NUM_0, &cfg);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n\n    ret = tkl_i2c_irq_init(I2C_NUM_0, i2c_event_cb_fun);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n\n    ret = tkl_i2c_irq_enable(I2C_NUM_0);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n\n    ret = tkl_i2c_master_send(I2C_NUM_0, 0x57, send_buf, sizeof(send_buf), 0);\n    if (ret < 0) {\n        //failed\n    }\n    while (cb_transfer_flag == 0xff);\n\n    //check transfer result\n    if (cb_transfer_flag == IIC_EVENT_TRANSFER_DONE) {\n        //transmit done\n    } else {\n        //failed\n    }\n    cb_transfer_flag = 0xff;\n\n    ret = tkl_i2c_master_receive(I2C_NUM_0, 0x57, rcv_buf, sizeof(rcv_buf), 0);\n    if (ret < 0) {\n        //failed\n    }\n\n    while (cb_transfer_flag == 0xff);\n\n    //check transfer result\n    if (cb_transfer_flag == IIC_EVENT_TRANSFER_DONE) {\n        //transmit done\n    } else {\n        //failed\n    }\n\n    ret = tkl_i2c_irq_disable(I2C_NUM_0);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n    //uninitialize iic\n    ret = tkl_i2c_deinit(I2C_NUM_0);\n    if (ret != 0) {\n       //failed\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"1i2c-\u793A\u4F8B\u4E8C",children:"1.I2C \u793A\u4F8B\u4E8C"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-c",children:"void tuya_i2c_slave_test(void)\n{\n    OPERATE_RET ret;\n 	TUYA_IIC_BASE_CFG_T cfg;\n    TUYA_IIC_STATUS_T st;\n    //receive buffer\n    char rcv_buf[10] ;\n    //data to send\n    char send_buf[10] = {0,1,2,3,4,5,6,7,8,9};\n    int32_t cnt = 100;\n\n    tkl_io_pinmux_config(TUYA_IO_PIN_0, TUYA_IIC0_SCL);\n    tkl_io_pinmux_config(TUYA_IO_PIN_1, TUYA_IIC0_SDA);\n\n    cfg.role = TUYA_IIC_MODE_SLAVE;\n    cfg.speed = TUYA_IIC_BUS_SPEED_100K;\n    cfg.addr_width = TUYA_IIC_ADDRESS_7BIT;\n\n    ret = tkl_i2c_init(I2C_NUM_0, &cfg);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n\n    ret = tkl_i2c_set_slave_addr(I2C_NUM_0, 0x57);\n    if (ret != OPRT_OK) {\n        //fail\n        return;\n    }\n\n    ret = tkl_i2c_slave_send(I2C_NUM_0, send_buf, sizeof(send_buf));\n    if (ret < 0) {\n        //failed\n    }\n    //wait send done, waiting for 100 ms max\n    st.busy = 1;\n    cnt = 100;\n    while(cnt--) {\n        tkl_system_sleep(1);\n        //check status\n        st = tkl_i2c_get_status(I2C_NUM_0);\n        //transmit done\n        if (st.busy == 0){\n            break;\n        }\n    }\n\n    ret = tkl_i2c_slave_receive(I2C_NUM_0, rcv_buf, sizeof(rcv_buf));\n    if (ret < 0) {\n        //failed\n    }\n    //wait send done, waiting for 100 ms max\n    st.busy = 1;\n    cnt = 100;\n    while(cnt--) {\n        tkl_system_sleep(1);\n        //check status\n        st = tkl_i2c_get_status(I2C_NUM_0);\n        //transmit done\n        if (st.busy == 0){\n            break;\n        }\n    }\n\n    //uninitialize iic\n    ret = tkl_i2c_deinit(I2C_NUM_0);\n    if (ret != 0) {\n       //failed\n    }\n\n}\n"})})]})}function h(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},8453:function(e,n,l){l.d(n,{R:()=>d,x:()=>c});var i=l(6540);let t={},s=i.createContext(t);function d(e){let n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);