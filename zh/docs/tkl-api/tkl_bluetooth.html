<!doctype html><html lang=zh dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tkl-api/tkl_bluetooth" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>tkl_bluetooth | 蓝牙驱动 | TuyaOpen</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://tuyaopen.io/zh/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true name=twitter:image content=https://tuyaopen.io/zh/img/home/tuyaopen-logo-social-preview.png /><meta data-rh=true property=og:url content=https://tuyaopen.io/zh/docs/tkl-api/tkl_bluetooth /><meta data-rh=true property=og:locale content=zh /><meta data-rh=true property=og:locale:alternate content=en /><meta data-rh=true name=docusaurus_locale content=zh /><meta data-rh=true name=docsearch:language content=zh /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="tkl_bluetooth | 蓝牙驱动 | TuyaOpen"/><meta data-rh=true name=description content=tklblestack_init /><meta data-rh=true property=og:description content=tklblestack_init /><link data-rh=true rel=icon href=/zh/img/favicon.ico /><link data-rh=true rel=canonical href=https://tuyaopen.io/zh/docs/tkl-api/tkl_bluetooth /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/tkl-api/tkl_bluetooth hreflang=en /><link data-rh=true rel=alternate href=https://tuyaopen.io/zh/docs/tkl-api/tkl_bluetooth hreflang=zh /><link data-rh=true rel=alternate href=https://tuyaopen.io/docs/tkl-api/tkl_bluetooth hreflang=x-default /><link data-rh=true rel=preconnect href=https://NT1L7IWROF-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://tuyaopen.io/zh/docs/tkl-api/tkl_bluetooth","name":"tkl_bluetooth | 蓝牙驱动","position":1}]}</script><link rel=alternate type=application/rss+xml href=/zh/blog/rss.xml title="TuyaOpen RSS Feed"><link rel=alternate type=application/atom+xml href=/zh/blog/atom.xml title="TuyaOpen Atom Feed"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-3M0J54E8XF"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3M0J54E8XF",{})</script><link rel=search type=application/opensearchdescription+xml title=TuyaOpen href=/zh/opensearch.xml><link rel=preconnect href=https://www.clarity.ms><script>!function(t,e,n,c,r,s,a){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(s=e.createElement(c)).async=1,s.src="https://www.clarity.ms/tag/"+r,(a=e.getElementsByTagName(c)[0]).parentNode.insertBefore(s,a)}(window,document,"clarity","script","lggqck9srz")</script><meta name=algolia-site-verification content=6232065417750C16><link rel=stylesheet href=/zh/assets/css/styles.92660d3d.css /><script src=/zh/assets/js/runtime~main.59f9db1f.js defer></script><script src=/zh/assets/js/main.91e4d038.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=跳到主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="theme-layout-navbar navbar navbar--fixed-top navbarHideable_m1mJ"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/zh/><div class=navbar__logo><img src=/zh/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/zh/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">TuyaOpen</b></a><a class="navbar__item navbar__link" href=/zh/docs/about-tuyaopen>文档</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>获取</a><ul class=dropdown__menu><li><a class=dropdown__link href=/zh/pricing>服务授权码</a><li><a class=dropdown__link href=/zh/get-hardware>获取硬件</a><li><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=dropdown__link>获取代码<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><a class="navbar__item navbar__link" href=/zh/blog>博客</a><a class="navbar__item navbar__link" href=/zh/projects>项目</a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>工具</a><ul class=dropdown__menu><li><a class=dropdown__link href=/zh/tools/tyutool>涂鸦通用串口工具</a><li><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=dropdown__link>Web串口/烧录工具<svg width=12 height=12 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>简体中文</a><ul class=dropdown__menu><li><a href=/docs/tkl-api/tkl_bluetooth target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/zh/docs/tkl-api/tkl_bluetooth target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=zh>简体中文</a></ul></div><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label=GitHub></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="切换浅色/暗黑模式（当前为system mode）"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>搜索</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label=回到顶部 class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex=-1 class=sidebarLogo_isFc href=/zh/><img src=/zh/img/home/tuyaopen-logo-simple-dark.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/zh/img/home/tuyaopen-logo-simple-light.png alt=TuyaOpen class="themedComponent_mlkZ themedComponent--dark_xIcU"/><b>TuyaOpen</b></a><nav aria-label=文档侧边栏 class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/zh/docs/about-tuyaopen><span title="关于 TuyaOpen" class=linkLabel_WmDU>关于 TuyaOpen</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/zh/docs/maintenance-and-releases><span title="技术 Roadmap 与发布" class=linkLabel_WmDU>技术 Roadmap 与发布</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/zh/docs/project-walkthrough><span title=目录结构 class=linkLabel_WmDU>目录结构</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/zh/docs/quick-start><span title=快速开始 class=categoryLinkLabel_W154>快速开始</span></a><button aria-label="折叠侧边栏分类 '快速开始'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/unboxing><span title=极速体验 class=linkLabel_WmDU>极速体验</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/enviroment-setup><span title=环境搭建 class=linkLabel_WmDU>环境搭建</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/project-compilation><span title=项目编译 class=linkLabel_WmDU>项目编译</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/firmware-burning><span title=固件烧录 class=linkLabel_WmDU>固件烧录</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/equipment-authorization><span title=设备授权 class=linkLabel_WmDU>设备授权</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/device-network-configuration><span title=设备配网 class=linkLabel_WmDU>设备配网</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/quick-start/device-debug><span title=设备调试 class=linkLabel_WmDU>设备调试</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/zh/docs/hardware-specific><span title=硬件文档 class=categoryLinkLabel_W154>硬件文档</span></a><button aria-label="折叠侧边栏分类 '硬件文档'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/zh/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5-AI Board DevKit" class=categoryLinkLabel_W154>T5-AI Board DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/hardware-specific/t5-ai-board/overview-t5-ai-board><span title="T5AI-Board 概述" class=linkLabel_WmDU>T5AI-Board 概述</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/zh/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5-AI Core DevKit" class=categoryLinkLabel_W154>T5-AI Core DevKit</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/hardware-specific/t5-ai-core/overview-t5-ai-core><span title="T5AI-Core 概述" class=linkLabel_WmDU>T5AI-Core 概述</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/zh/docs/applications><span title=应用示例 class=categoryLinkLabel_W154>应用示例</span></a><button aria-label="展开侧边栏分类 '应用示例'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/examples/demo-generic-examples><span title=示例 class=categoryLinkLabel_W154>示例</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/peripheral/support_peripheral_list><span title=外设驱动 class=categoryLinkLabel_W154>外设驱动</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/new-hardware/porting-platform><span title=添加新项目 class=categoryLinkLabel_W154>添加新项目</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/zh/docs/cloud/tuya-cloud/creating-new-product><span title=云服务 class=categoryLinkLabel_W154>云服务</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/zh/docs/cloud/tuya-cloud/creating-new-product><span title=涂鸦云平台开发 class=categoryLinkLabel_W154>涂鸦云平台开发</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/cloud/tuya-cloud/creating-new-product><span title=创建新产品 class=linkLabel_WmDU>创建新产品</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/zh/docs/tkl-api/tkl_mutex><span title="TKL APIs" class=categoryLinkLabel_W154>TKL APIs</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/zh/docs/tkl-api/tkl_mutex><span title="OS API" class=categoryLinkLabel_W154>OS API</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_mutex><span title="tkl_mutex | Mutex 互斥锁" class=linkLabel_WmDU>tkl_mutex | Mutex 互斥锁</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_semaphore><span title="tkl_semaphore | 信号量" class=linkLabel_WmDU>tkl_semaphore | 信号量</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_system><span title="tkl_system | 系统接口" class=linkLabel_WmDU>tkl_system | 系统接口</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_timer><span title="tkl_timer | Timer 驱动" class=linkLabel_WmDU>tkl_timer | Timer 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_thread><span title="tkl_thread | 线程" class=linkLabel_WmDU>tkl_thread | 线程</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_wakeup><span title="tkl_wakeup | 唤醒驱动" class=linkLabel_WmDU>tkl_wakeup | 唤醒驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_ota><span title="tkl_ota | OTA 固件升级" class=linkLabel_WmDU>tkl_ota | OTA 固件升级</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_output><span title="tkl_output | Log 日志输出" class=linkLabel_WmDU>tkl_output | Log 日志输出</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/zh/docs/tkl-api/tkl_adc><span title="硬件接口 API" class=categoryLinkLabel_W154>硬件接口 API</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_adc><span title="tkl_adc | ADC 驱动" class=linkLabel_WmDU>tkl_adc | ADC 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_dac><span title="tkl_dac | DAC 驱动" class=linkLabel_WmDU>tkl_dac | DAC 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_flash><span title="tkl_flash | Flash 驱动" class=linkLabel_WmDU>tkl_flash | Flash 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_gpio><span title="tkl_gipo | GPIO 驱动" class=linkLabel_WmDU>tkl_gipo | GPIO 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_i2c><span title="tKl_i2c | I2C 驱动" class=linkLabel_WmDU>tKl_i2c | I2C 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_i2s><span title="tlk_i2s | I2S 驱动" class=linkLabel_WmDU>tlk_i2s | I2S 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_pinmux><span title="tkl_pinmux | PINMUX 驱动" class=linkLabel_WmDU>tkl_pinmux | PINMUX 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_pwm><span title="tkl_pwm | PWM 驱动" class=linkLabel_WmDU>tkl_pwm | PWM 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_register><span title="tkl_register | Register 驱动" class=linkLabel_WmDU>tkl_register | Register 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_rtc><span title="tkl_rtc | RTC 驱动" class=linkLabel_WmDU>tkl_rtc | RTC 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_spi><span title="tkl_spi | SPI 驱动" class=linkLabel_WmDU>tkl_spi | SPI 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_uart><span title="tkl_uart | UART 驱动" class=linkLabel_WmDU>tkl_uart | UART 驱动</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/zh/docs/tkl-api/tkl_wifi><span title="网络 API" class=categoryLinkLabel_W154>网络 API</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_wifi><span title="tkl_wifi | Wi-Fi 驱动" class=linkLabel_WmDU>tkl_wifi | Wi-Fi 驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/zh/docs/tkl-api/tkl_bluetooth><span title="tkl_bluetooth | 蓝牙驱动" class=linkLabel_WmDU>tkl_bluetooth | 蓝牙驱动</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_lwip><span title="tkl_lwip | lwIP 协议栈" class=linkLabel_WmDU>tkl_lwip | lwIP 协议栈</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_network><span title="tkl_network | 网络通信接口" class=linkLabel_WmDU>tkl_network | 网络通信接口</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/zh/docs/tkl-api/tkl_wired><span title="tkl_wired | 以太有线驱动" class=linkLabel_WmDU>tkl_wired | 以太有线驱动</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/tos-tools/tos-guide><span title="Tos 工具" class=categoryLinkLabel_W154>Tos 工具</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/build-system/compilation-guide><span title=构建系统 class=categoryLinkLabel_W154>构建系统</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/zh/docs/faqs><span title=FAQs class=linkLabel_WmDU>FAQs</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/zh/docs/contribute/contribute-guide><span title=贡献 class=categoryLinkLabel_W154>贡献</span></a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=页面路径><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label=主页面 class=breadcrumbs__link href=/zh/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>TKL APIs</span><li class=breadcrumbs__item><span class=breadcrumbs__link>网络 API</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>tkl_bluetooth | 蓝牙驱动</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1 id=tkl_bluetooth--蓝牙驱动>tkl_bluetooth | 蓝牙驱动</h1></header>
<h1 id=api-描述>API 描述</h1>
<h3 id=tkl_ble_stack_init>tkl_ble_stack_init</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_stack_init(uint8_t role);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>初始化 ble 协议栈</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>role<td>ble 角色配置</table>
<table><thead><tr><th style=text-align:left>名字<th style=text-align:left>定义<th style=text-align:left>备注<tbody><tr><td style=text-align:left>TKL_BLE_ROLE_SERVER<td style=text-align:left>BLE 服务器<td style=text-align:left><tr><td style=text-align:left>TKL_BLE_ROLE_CLIENT<td style=text-align:left>BLE 客户端<td style=text-align:left></table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_stack_deinit>tkl_ble_stack_deinit</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_stack_deinit(uint8_t role);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>去初始化 ble 协议栈</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>role<td>ble 角色，如下所示</table>
<table><thead><tr><th style=text-align:left>名字<th style=text-align:left>定义<th style=text-align:left>备注<tbody><tr><td style=text-align:left>TKL_BLE_ROLE_SERVER<td style=text-align:left>BLE 服务器<td style=text-align:left><tr><td style=text-align:left>TKL_BLE_ROLE_CLIENT<td style=text-align:left>BLE 客户端<td style=text-align:left></table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_callback_register>tkl_ble_gap_callback_register</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_callback_register(const TKL_BLE_GAP_EVT_FUNC_CB gap_evt);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>注册 gap 回调函数</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>gap_evt<td>注册 gap 回调函数，如下定义</table>
<pre><code class=language-c>typedef void(*TKL_BLE_GAP_EVT_FUNC_CB)(TKL_BLE_GAP_PARAMS_EVT_T *p_event);
</code></pre>
<p><strong>TKL_BLE_GAP_PARAMS_EVT_T</strong></p>
<pre><code class=language-c>typedef struct {
      TKL_BLE_GAP_EVT_TYPE_E          type;           /**&lt; Gap Event */
      uint16_t                        conn_handle;    /**&lt; Connection Handle */
      int                           result;         /**&lt; Will Refer to HOST STACK Error Code */

      union {
          TKL_BLE_GAP_CONNECT_EVT_T       connect;        /**&lt; Receive connect callback, This value can be used with TKL_BLE_EVT_PERIPHERAL_CONNECT and TKL_BLE_EVT_CENTRAL_CONNECT_DISCOVERY*/
          TKL_BLE_GAP_DISCONNECT_EVT_T    disconnect;     /**&lt; Receive disconnect callback*/
          TKL_BLE_GAP_ADV_REPORT_T        adv_report;     /**&lt; Receive Adv and Respond report*/
          TKL_BLE_GAP_CONN_PARAMS_T       conn_param;     /**&lt; We will update connect parameters.This value can be used with TKL_BLE_EVT_CONN_PARAM_REQ and TKL_BLE_EVT_CONN_PARAM_UPDATE*/
          char                          link_rssi;      /**&lt; Peer device RSSI value */
      }gap_event;

  } TKL_BLE_GAP_PARAMS_EVT_T;
</code></pre>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatt_callback_register>tkl_ble_gatt_callback_register</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatt_callback_register(const TKL_BLE_GATT_EVT_FUNC_CB gatt_evt);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>注册GATT回调函数</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>gatt_evt<td>GATT 回调函数</table>
<pre><code class=language-c>typedef void(*TKL_BLE_GATT_EVT_FUNC_CB)(TKL_BLE_GATT_PARAMS_EVT_T *p_event);
</code></pre>
<p><strong>TKL_BLE_GATT_PARAMS_EVT_T</strong></p>
<p>gatt事件定义如下:</p>
<pre><code class=language-c>typedef struct {
    TKL_BLE_GATT_EVT_TYPE_E             type;           /**&lt; Gatt Event */
    uint16_t                            conn_handle;    /**&lt; Connection Handle */
    int                               result;         /**&lt; Will Refer to HOST STACK Error Code */

    union {
        uint16_t                        exchange_mtu;   /**&lt; This value can be used with TKL_BLE_GATT_EVT_MTU_REQUEST and TKL_BLE_GATT_EVT_MTU_RSP*/
        TKL_BLE_GATT_SVC_DISC_TYPE_T    svc_disc;       /**&lt; Discovery All Service */
        TKL_BLE_GATT_CHAR_DISC_TYPE_T   char_disc;      /**&lt; Discovery Specific Characteristic */
        TKL_BLE_GATT_DESC_DISC_TYPE_T   desc_disc;      /**&lt; Discovery Specific Descriptors*/
        TKL_BLE_NOTIFY_RESULT_EVT_T     notify_result;  /**&lt; This value can be used with TKL_BLE_GATT_EVT_NOTIFY_TX*/
        TKL_BLE_DATA_REPORT_T           write_report;   /**&lt; This value can be used with TKL_BLE_GATT_EVT_WRITE_REQ*/
        TKL_BLE_DATA_REPORT_T           data_report;    /**&lt; This value can be used with TKL_BLE_GATT_EVT_NOTIFY_INDICATE_RX*/
        TKL_BLE_DATA_REPORT_T           data_read;      /**&lt; After we do read attr in central mode, we will get the callback*/
        TKL_BLE_SUBSCRBE_EVT_T          subscribe;      /**&lt; ccc callback event, used with TKL_BLE_GATT_EVT_SUBSCRIBE*/
        TKL_BLE_READ_CHAR_EVT_T         char_read;      /**&lt; read char event, used with TKL_BLE_GATT_EVT_READ_CHAR_VALUE*/
    } gatt_event;
} TKL_BLE_GATT_PARAMS_EVT_T;
</code></pre>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_addr_set>tkl_ble_gap_addr_set</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_addr_set(TKL_BLE_GAP_ADDR_T const *p_peer_addr);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>设置Ble mac地址</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_peer_addr<td>mac 地址，可选 public/random</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
<li>
<p><strong>备注</strong></p>
<p>一般模组经过生产已带有 mac 地址，无需配置。</p>
</li>
</ul>
<h3 id=tkl_ble_gap_address_get>tkl_ble_gap_address_get</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_address_get(TKL_BLE_GAP_ADDR_T *p_peer_addr);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>读取Ble设备mac地址</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[out]<td>p_peer_addr<td>设备mac地址</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
<li>
<p><strong>备注</strong></p>
<p>很少使用</p>
</li>
</ul>
<h3 id=tkl_ble_gap_adv_start>tkl_ble_gap_adv_start</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_adv_start(TKL_BLE_GAP_ADV_PARAMS_T const *p_adv_params);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>开启ble广播</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_adv_params<td>广播参数，如下所示</table>
<p><strong>TKL_BLE_GAP_ADV_PARAMS_T</strong></p>
<pre><code class=language-c>typedef struct {
    uint8_t                 adv_type;                   /**&lt; Adv Type. Refer to TKL_BLE_GAP_ADV_TYPE_CONN_SCANNABLE_UNDIRECTED etc.*/
    TKL_BLE_GAP_ADDR_T      direct_addr;                /**&lt; For Directed Advertising, you can fill in direct address */

    uint16_t                adv_interval_min;           /**&lt; Range: 0x0020 to 0x4000  Time = N * 0.625 msec Time Range: 20 ms to 10.24 sec */
    uint16_t                adv_interval_max;           /**&lt; Range: 0x0020 to 0x4000  Time = N * 0.625 msec Time Range: 20 ms to 10.24 sec */
    uint8_t                 adv_channel_map;            /**&lt; Advertising Channel Map, 0x01 = adv channel index 37,  0x02 = adv channel index 38,
                                                                0x04 = adv channel index 39. Default Value: 0x07*/
} TKL_BLE_GAP_ADV_PARAMS_T;
</code></pre>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_adv_stop>tkl_ble_gap_adv_stop</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_adv_stop(void);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>关闭ble广播</p>
</li>
<li>
<p>参数：</p>
<p>无</p>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_adv_rsp_data_set>tkl_ble_gap_adv_rsp_data_set</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_adv_rsp_data_set(TKL_BLE_DATA_T const *p_adv, TKL_BLE_DATA_T const *p_scan_rsp);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>设置广播数据</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_adv<td>广播数据<tr><td>[in]<td>p_scan_rsp<td>扫描响应数据</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_adv_rsp_data_update>tkl_ble_gap_adv_rsp_data_update</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_adv_rsp_data_update(TKL_BLE_DATA_T const *p_adv, TKL_BLE_DATA_T const *p_scan_rsp);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>更新广播数据</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_adv<td>广播数据<tr><td>[in]<td>p_scan_rsp<td>扫描响应数据</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h2 id=tkl_ble_gap_scan_start><strong>tkl_ble_gap_scan_start</strong></h2>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_scan_start(TKL_BLE_GAP_SCAN_PARAMS_T const *p_scan_params)
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>打开扫描</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_scan_params<td>扫描参数，如下所示</table>
<p><strong>TKL_BLE_GAP_SCAN_PARAMS_T</strong></p>
<pre><code class=language-c>typedef struct {
    uint8_t                 extended;                   /**&lt; If 1, the scanner will accept extended advertising packets.
                                                            If set to 0, the scanner will not receive advertising packets
                                                            on secondary advertising channels, and will not be able
                                                            to receive long advertising PDUs. */
    uint8_t                 active : 1;                 /**&lt; [Tuya Need]!!!! If 1, perform active scanning by sending scan requests.
                                                            This parameter is ignored when used with @ref tkl_ble_gap_connect. */
    uint8_t                 scan_phys;                  /**&lt; Refer to @TKL_BLE_GAP_PHY_1MBPS. TKL_BLE_GAP_PHY_2MBPS*/
    uint16_t                interval;                   /**&lt; Scan interval in 625 us units. */
    uint16_t                window;                     /**&lt; Scan window in 625 us units. */
    uint16_t                timeout;                    /**&lt; Scan timeout in 10 ms units. */
    uint8_t                 scan_channel_map;           /**&lt; Scan Channel Index, refer to @TKL_BLE_GAP_ADV_PARAMS_T*/
} TKL_BLE_GAP_SCAN_PARAMS_T;
</code></pre>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
<li>
<p>备注</p>
<p>tkl_ble_gap_scan_start 在开启遥控器或支持 central 模式时使用。</p>
</li>
</ul>
<h3 id=tkl_ble_gap_scan_stop>tkl_ble_gap_scan_stop</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_scan_stop(void)
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>关闭蓝牙扫描</p>
</li>
<li>
<p>参数：</p>
</li>
</ul>
<p>​ 无</p>
<ul>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gap_connect>tkl_ble_gap_connect</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_connect(TKL_BLE_GAP_ADDR_T const *p_peer_addr, TKL_BLE_GAP_SCAN_PARAMS_T const *p_scan_params, TKL_BLE_GAP_CONN_PARAMS_T const *p_conn_params)
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>作为client时，发起连接。</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>p_peer_addr<td>对端地址<tr><td>[in]<td>p_scan_params<td>扫描参数<tr><td>[in]<td>p_conn_params<td>连接参数</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
<li>
<p><strong>说明</strong></p>
<p>只有作为 central 需要适配。</p>
</li>
</ul>
<h3 id=tkl_ble_gap_disconnect>tkl_ble_gap_disconnect</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_disconnect(uint16_t conn_handle, uint8_t hci_reason);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>断开ble连接</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>p_conn_params<td>断连原因，非异常情况下，主动断连使用 0x13。</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
<li>
<p><strong>备注</strong></p>
<p>client 和 server 均会用到</p>
</li>
</ul>
<h3 id=tkl_ble_gap_conn_param_update>tkl_ble_gap_conn_param_update</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gap_conn_param_update(uint16_t conn_handle, TKL_BLE_GAP_CONN_PARAMS_T const *p_conn_params);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>gap 连接参数更新</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>p_conn_params<td>连接参数</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatts_service_add>tkl_ble_gatts_service_add</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_service_add(TKL_BLE_GATTS_PARAMS_T *p_service);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>gatt 添加服务，server 使用。</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in/out]<td>p_service<td>GATT 服务</table>
<p><strong>TKL_BLE_GATTS_PARAMS_T</strong></p>
<pre><code class=language-c>typedef struct {
    uint8_t                     svc_num;                /**&lt; If we only use service(0xFD50), the svc_num will be set into 1 */
    TKL_BLE_SERVICE_PARAMS_T    *p_service;
} TKL_BLE_GATTS_PARAMS_T;
</code></pre>
<p><strong>TKL_BLE_SERVICE_PARAMS_T</strong></p>
<p>handle 下发时默认 0xFF，添加完服务之后会更新对应的 handle 值。</p>
<pre><code class=language-c>typedef struct {
    uint16_t                    handle;                 /**&lt; After init the service, we will get the svc-handle */

    TKL_BLE_UUID_T              svc_uuid;               /**&lt; Service UUID */
    TKL_BLE_SERVICE_TYPE_E      type;                   /**&lt; Service Type */

    uint8_t                     char_num;               /**&lt; Number of characteristic */
    TKL_BLE_CHAR_PARAMS_T       *p_char;                /**&lt; Pointer of characteristic */
} TKL_BLE_SERVICE_PARAMS_T;
</code></pre>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatts_value_set>tkl_ble_gatts_value_set</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_value_set(uint16_t conn_handle, uint16_t char_handle, uint8_t *p_data, uint16_t length);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>gatt 更新属性值，如配置 read 特征值，可以使用该函数更新</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>char_handle<td>特征值 handle<tr><td>[in]<td>p_data<td>数据<tr><td>[in]<td>length<td>数据长度</table>
</li>
<li>
<p>返回值:</p>
<p>OPRT_OK : 成功 Others ：失败</p>
</li>
</ul>
<h3 id=tkl_ble_gatts_value_get>tkl_ble_gatts_value_get</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_value_get(uint16_t conn_handle, uint16_t char_handle, uint8_t *p_data, uint16_t length);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>GATT读取属性值，暂未用到</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>char_handle<td>特征值 handle<tr><td>[out]<td>p_data<td>读取数据<tr><td>[in]<td>length<td>读取长度</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatts_value_notify>tkl_ble_gatts_value_notify</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_value_notify(uint16_t conn_handle, uint16_t char_handle, uint8_t *p_data, uint16_t length);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>服务器发送通知数据。</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>char_handle<td>特征值 handle<tr><td>[in]<td>p_data<td>通知的数据<tr><td>[in]<td>length<td>通知的数据长度</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatts_value_indicate>tkl_ble_gatts_value_indicate</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_value_indicate(uint16_t conn_handle, uint16_t char_handle, uint8_t *p_data, uint16_t length);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>服务器发送指示数据。</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>char_handle<td>特征值 handle<tr><td>[in]<td>p_data<td>指示的数据<tr><td>[in]<td>length<td>指示的数据长度</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul>
<h3 id=tkl_ble_gatts_exchange_mtu_reply>tkl_ble_gatts_exchange_mtu_reply</h3>
<pre><code class=language-c>OPERATE_RET tkl_ble_gatts_exchange_mtu_reply(uint16_t conn_handle, uint16_t server_rx_mtu);
</code></pre>
<ul>
<li>
<p>功能描述:</p>
<p>服务器配置 MTU，即通过向客户端发送交换 MTU 响应，回复客户端 MTU 交换的请求</p>
</li>
<li>
<p>参数：</p>
<table><thead><tr><th>输入/输出<th>参数名<th>描述<tbody><tr><td>[in]<td>conn_handle<td>连接 handle<tr><td>[in]<td>server_rx_mtu<td>server侧接收 mtu 大小</table>
</li>
<li>
<p>返回值:</p>
<ul>
<li>OPRT_OK : 成功</li>
<li>Others ：失败</li>
</ul>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/Tuya-Community/TuyaOpen.io/edit/master/i18n/zh/docusaurus-plugin-content-docs/current/tkl-api/tkl_bluetooth.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>编辑此页</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label=文件选项卡><a class="pagination-nav__link pagination-nav__link--prev" href=/zh/docs/tkl-api/tkl_wifi><div class=pagination-nav__sublabel>上一页</div><div class=pagination-nav__label>tkl_wifi | Wi-Fi 驱动</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/zh/docs/tkl-api/tkl_lwip><div class=pagination-nav__sublabel>下一页</div><div class=pagination-nav__label>tkl_lwip | lwIP 协议栈</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#tkl_ble_stack_init class="table-of-contents__link toc-highlight">tkl_ble_stack_init</a><li><a href=#tkl_ble_stack_deinit class="table-of-contents__link toc-highlight">tkl_ble_stack_deinit</a><li><a href=#tkl_ble_gap_callback_register class="table-of-contents__link toc-highlight">tkl_ble_gap_callback_register</a><li><a href=#tkl_ble_gatt_callback_register class="table-of-contents__link toc-highlight">tkl_ble_gatt_callback_register</a><li><a href=#tkl_ble_gap_addr_set class="table-of-contents__link toc-highlight">tkl_ble_gap_addr_set</a><li><a href=#tkl_ble_gap_address_get class="table-of-contents__link toc-highlight">tkl_ble_gap_address_get</a><li><a href=#tkl_ble_gap_adv_start class="table-of-contents__link toc-highlight">tkl_ble_gap_adv_start</a><li><a href=#tkl_ble_gap_adv_stop class="table-of-contents__link toc-highlight">tkl_ble_gap_adv_stop</a><li><a href=#tkl_ble_gap_adv_rsp_data_set class="table-of-contents__link toc-highlight">tkl_ble_gap_adv_rsp_data_set</a><li><a href=#tkl_ble_gap_adv_rsp_data_update class="table-of-contents__link toc-highlight">tkl_ble_gap_adv_rsp_data_update</a><li><a href=#tkl_ble_gap_scan_start class="table-of-contents__link toc-highlight"><strong>tkl_ble_gap_scan_start</strong></a><ul><li><a href=#tkl_ble_gap_scan_stop class="table-of-contents__link toc-highlight">tkl_ble_gap_scan_stop</a><li><a href=#tkl_ble_gap_connect class="table-of-contents__link toc-highlight">tkl_ble_gap_connect</a><li><a href=#tkl_ble_gap_disconnect class="table-of-contents__link toc-highlight">tkl_ble_gap_disconnect</a><li><a href=#tkl_ble_gap_conn_param_update class="table-of-contents__link toc-highlight">tkl_ble_gap_conn_param_update</a><li><a href=#tkl_ble_gatts_service_add class="table-of-contents__link toc-highlight">tkl_ble_gatts_service_add</a><li><a href=#tkl_ble_gatts_value_set class="table-of-contents__link toc-highlight">tkl_ble_gatts_value_set</a><li><a href=#tkl_ble_gatts_value_get class="table-of-contents__link toc-highlight">tkl_ble_gatts_value_get</a><li><a href=#tkl_ble_gatts_value_notify class="table-of-contents__link toc-highlight">tkl_ble_gatts_value_notify</a><li><a href=#tkl_ble_gatts_value_indicate class="table-of-contents__link toc-highlight">tkl_ble_gatts_value_indicate</a><li><a href=#tkl_ble_gatts_exchange_mtu_reply class="table-of-contents__link toc-highlight">tkl_ble_gatts_exchange_mtu_reply</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>文档</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/zh/docs/quick-start/unboxing>教程</a><li class=footer__item><a class=footer__link-item href=/zh/pricing>服务</a><li class=footer__item><a class=footer__link-item href=/zh/docs/hardware-specific>硬件支持清单</a><li class=footer__item><a class=footer__link-item href=/zh/docs/hardware-specific/t5-ai-board/overview-t5-ai-board>Tuya T5AI 开发套件</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>工具</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://tuyaopen.ai/tools target=_blank rel="noopener noreferrer" class=footer__link-item>Web Serial 工具<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>社区</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.com/invite/yPPShSTttG target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/tuyasmart target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.youtube.com/@tuya2023 target=_blank rel="noopener noreferrer" class=footer__link-item>Youtube<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/tuya-smart target=_blank rel="noopener noreferrer" class=footer__link-item>Linkedin<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>更多</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/tuya/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://gitee.com/tuya-open/TuyaOpen target=_blank rel="noopener noreferrer" class=footer__link-item>Gitee(Mirror)<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>致谢</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://storyset.com/technology target=_blank rel="noopener noreferrer" class=footer__link-item>Thanks for the technology illustrations by Storyset<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>
        <p style="font-weight: 500;">版权所有 © TuyaOpen Authors 2025 | Documentation Distributed under Apache License Version 2.0</p>
</div></div></div></footer></div></body>